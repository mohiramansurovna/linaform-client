import{c as j,a as Y,e as Re,f as kn,r as i,g as yn,j as o,P as de,h as zt,i as U,k as X,l as x,m as Pt,n as St,o as Rt,p as Et,q as It,F as At,D as Tt,s as Mn,t as Dt,v as Je,d as le,b as he,u as $t,w as Ot,x as Zt,y as Lt,L as en,B as nn,O as tn}from"./index-BhFsQ8vH.js";import{c as Nn,R as Ft,A as Ut,C as Gt,a as Kt,u as pe,S as R,b as P,d as Cn,e as Q,f as Bt,g as Ee,h as F,i as zn,j as Vt,k as Wt,l as qt,m as Ht,n as Yt,o as Xt,p as Qt}from"./sidebar-DNV3oG8l.js";import{c as Jt,a as Pn,u as er,I as nr,R as tr,b as rr,d as or,e as sr}from"./useNoteMutations-BYC9caU4.js";import{H as Sn}from"./heart-CWHS2Fp0.js";import{S as ar}from"./search-input-bRfe5vVP.js";import{L as cr}from"./loader-DH6kdCvx.js";import{C as rn}from"./chevrons-right-CqjWwfCS.js";import{A as ke,a as ye,b as Me}from"./avatar-CakYDQY6.js";import{L as ir}from"./loader-circle-Dfg2y9fz.js";import{u as ur}from"./useThemeStore-BDunibeQ.js";import{b as h,e as Ie,n as Ae,g as Te,d as _,c as Ne,s as dr,f as lr,h as V,i as De,j as Ce,k as ze,l as on,r as hr,m as pr,o as W,q as k,$ as mr,t as fr,u as gr,_ as xr,v as vr,w as _r,x as wr,y as jr}from"./parse-CqfTvWUt.js";import{B as Rn}from"./bell-ring-DTXojYOf.js";import{A as br}from"./schemas-CsxVtVro.js";import"./search-CT4sTqr8.js";import"./index-Cs46FEHX.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],yr=j("badge-check",kr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M15 8h6",key:"8ybuxh"}],["path",{d:"M16.243 3.757A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673A9.4 9.4 0 0 1 18.667 12",key:"bdwj86"}]],Nr=j("bell-minus",Mr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],En=j("bell",Cr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M16 12h2",key:"7q9ll5"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M6 8h2",key:"30oboj"}]],sn=j("book-open-text",zr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]],an=j("chevrons-left",Pr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],Rr=j("chevrons-up-down",Sr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],In=j("circle-alert",Er);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ar=j("compass",Ir);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Dr=j("credit-card",Tr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],L=j("ellipsis",$r);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=[["path",{d:"m15 17 5-5-5-5",key:"nf172w"}],["path",{d:"M4 18v-2a4 4 0 0 1 4-4h12",key:"jmiej9"}]],Zr=j("forward",Or);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Fr=j("log-out",Lr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=[["path",{d:"M5 12h14",key:"1ays0h"}]],Gr=j("minus",Ur);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],Br=j("moon",Kr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Wr=j("pen",Vr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Hr=j("sparkles",qr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Xr=j("square-pen",Yr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Jr=j("sun",Qr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],An=j("trash-2",eo),cn=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,no=e=>{const n=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${n}$`)},to=/^[^A-Z]*$/,ro=/^[^a-z]*$/,E=h("$ZodCheck",(e,n)=>{var t;e._zod??(e._zod={}),e._zod.def=n,(t=e._zod).onattach??(t.onattach=[])}),oo=h("$ZodCheckMaxLength",(e,n)=>{E.init(e,n),e._zod.when=t=>{const r=t.value;return!Ae(r)&&r.length!==void 0},e._zod.onattach.push(t=>{const r=t._zod.bag.maximum??Number.POSITIVE_INFINITY;n.maximum<r&&(t._zod.bag.maximum=n.maximum)}),e._zod.check=t=>{const r=t.value;if(r.length<=n.maximum)return;const a=Te(r);t.issues.push({origin:a,code:"too_big",maximum:n.maximum,inclusive:!0,input:r,inst:e,continue:!n.abort})}}),so=h("$ZodCheckMinLength",(e,n)=>{E.init(e,n),e._zod.when=t=>{const r=t.value;return!Ae(r)&&r.length!==void 0},e._zod.onattach.push(t=>{const r=t._zod.bag.minimum??Number.NEGATIVE_INFINITY;n.minimum>r&&(t._zod.bag.minimum=n.minimum)}),e._zod.check=t=>{const r=t.value;if(r.length>=n.minimum)return;const a=Te(r);t.issues.push({origin:a,code:"too_small",minimum:n.minimum,inclusive:!0,input:r,inst:e,continue:!n.abort})}}),ao=h("$ZodCheckLengthEquals",(e,n)=>{E.init(e,n),e._zod.when=t=>{const r=t.value;return!Ae(r)&&r.length!==void 0},e._zod.onattach.push(t=>{const r=t._zod.bag;r.minimum=n.length,r.maximum=n.length,r.length=n.length}),e._zod.check=t=>{const r=t.value,s=r.length;if(s===n.length)return;const a=Te(r),c=s>n.length;t.issues.push({origin:a,...c?{code:"too_big",maximum:n.length}:{code:"too_small",minimum:n.length},input:t.value,inst:e,continue:!n.abort})}}),me=h("$ZodCheckStringFormat",(e,n)=>{var t;E.init(e,n),e._zod.onattach.push(r=>{const s=r._zod.bag;s.format=n.format,n.pattern&&(s.patterns??(s.patterns=new Set),s.patterns.add(n.pattern))}),(t=e._zod).check??(t.check=r=>{if(!n.pattern)throw new Error("Not implemented.");n.pattern.lastIndex=0,!n.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:n.format,input:r.value,...n.pattern?{pattern:n.pattern.toString()}:{},inst:e,continue:!n.abort})})}),co=h("$ZodCheckRegex",(e,n)=>{me.init(e,n),e._zod.check=t=>{n.pattern.lastIndex=0,!n.pattern.test(t.value)&&t.issues.push({origin:"string",code:"invalid_format",format:"regex",input:t.value,pattern:n.pattern.toString(),inst:e,continue:!n.abort})}}),io=h("$ZodCheckLowerCase",(e,n)=>{n.pattern??(n.pattern=to),me.init(e,n)}),uo=h("$ZodCheckUpperCase",(e,n)=>{n.pattern??(n.pattern=ro),me.init(e,n)}),lo=h("$ZodCheckIncludes",(e,n)=>{E.init(e,n);const t=Ie(n.includes),r=new RegExp(typeof n.position=="number"?`^.{${n.position}}${t}`:t);n.pattern=r,e._zod.onattach.push(s=>{const a=s._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),e._zod.check=s=>{s.value.includes(n.includes,n.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:n.includes,input:s.value,inst:e,continue:!n.abort})}}),ho=h("$ZodCheckStartsWith",(e,n)=>{E.init(e,n);const t=new RegExp(`^${Ie(n.prefix)}.*`);n.pattern??(n.pattern=t),e._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(t)}),e._zod.check=r=>{r.value.startsWith(n.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:n.prefix,input:r.value,inst:e,continue:!n.abort})}}),po=h("$ZodCheckEndsWith",(e,n)=>{E.init(e,n);const t=new RegExp(`.*${Ie(n.suffix)}$`);n.pattern??(n.pattern=t),e._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(t)}),e._zod.check=r=>{r.value.endsWith(n.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:n.suffix,input:r.value,inst:e,continue:!n.abort})}}),mo=h("$ZodCheckOverwrite",(e,n)=>{E.init(e,n),e._zod.check=t=>{t.value=n.tx(t.value)}}),fo={major:4,minor:0,patch:0},y=h("$ZodType",(e,n)=>{var t;e??(e={}),_(e._zod,"id",()=>n.type+"_"+hr(10)),e._zod.def=n,e._zod.bag=e._zod.bag||{},e._zod.version=fo;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const s of r)for(const a of s._zod.onattach)a(e);if(r.length===0)(t=e._zod).deferred??(t.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const s=(a,c,u)=>{let l=V(a),m;for(const p of c){if(p._zod.when){if(!p._zod.when(a))continue}else if(l)continue;const d=a.issues.length,g=p._zod.check(a);if(g instanceof Promise&&u?.async===!1)throw new Ne;if(m||g instanceof Promise)m=(m??Promise.resolve()).then(async()=>{await g,a.issues.length!==d&&(l||(l=V(a,d)))});else{if(a.issues.length===d)continue;l||(l=V(a,d))}}return m?m.then(()=>a):a};e._zod.run=(a,c)=>{const u=e._zod.parse(a,c);if(u instanceof Promise){if(c.async===!1)throw new Ne;return u.then(l=>s(l,r,c))}return s(u,r,c)}}e["~standard"]={validate:s=>{try{const a=dr(e,s);return a.success?{value:a.data}:{issues:a.error?.issues}}catch{return lr(e,s).then(c=>c.success?{value:c.data}:{issues:c.error?.issues})}},vendor:"zod",version:1}}),Tn=h("$ZodString",(e,n)=>{y.init(e,n),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??no(e._zod.bag),e._zod.parse=(t,r)=>{if(n.coerce)try{t.value=String(t.value)}catch{}return typeof t.value=="string"||t.issues.push({expected:"string",code:"invalid_type",input:t.value,inst:e}),t}}),Dn=h("$ZodStringFormat",(e,n)=>{me.init(e,n),Tn.init(e,n)}),go=h("$ZodUUID",(e,n)=>{if(n.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[n.version];if(r===void 0)throw new Error(`Invalid UUID version: "${n.version}"`);n.pattern??(n.pattern=cn(r))}else n.pattern??(n.pattern=cn());Dn.init(e,n)});function un(e,n,t){e.issues.length&&n.issues.push(...pr(t,e.issues)),n.value[t]=e.value}const xo=h("$ZodArray",(e,n)=>{y.init(e,n),e._zod.parse=(t,r)=>{const s=t.value;if(!Array.isArray(s))return t.issues.push({expected:"array",code:"invalid_type",input:s,inst:e}),t;t.value=Array(s.length);const a=[];for(let c=0;c<s.length;c++){const u=s[c],l=n.element._zod.run({value:u,issues:[]},r);l instanceof Promise?a.push(l.then(m=>un(m,t,c))):un(l,t,c)}return a.length?Promise.all(a).then(()=>t):t}});function dn(e,n,t,r){for(const s of e)if(s.issues.length===0)return n.value=s.value,n;return n.issues.push({code:"invalid_union",input:n.value,inst:t,errors:e.map(s=>s.issues.map(a=>Ce(a,r,ze())))}),n}const vo=h("$ZodUnion",(e,n)=>{y.init(e,n),_(e._zod,"values",()=>{if(n.options.every(t=>t._zod.values))return new Set(n.options.flatMap(t=>Array.from(t._zod.values)))}),_(e._zod,"pattern",()=>{if(n.options.every(t=>t._zod.pattern)){const t=n.options.map(r=>r._zod.pattern);return new RegExp(`^(${t.map(r=>De(r.source)).join("|")})$`)}}),e._zod.parse=(t,r)=>{let s=!1;const a=[];for(const c of n.options){const u=c._zod.run({value:t.value,issues:[]},r);if(u instanceof Promise)a.push(u),s=!0;else{if(u.issues.length===0)return u;a.push(u)}}return s?Promise.all(a).then(c=>dn(c,t,e,r)):dn(a,t,e,r)}}),_o=h("$ZodIntersection",(e,n)=>{y.init(e,n),e._zod.parse=(t,r)=>{const{value:s}=t,a=n.left._zod.run({value:s,issues:[]},r),c=n.right._zod.run({value:s,issues:[]},r);return a instanceof Promise||c instanceof Promise?Promise.all([a,c]).then(([l,m])=>ln(t,l,m)):ln(t,a,c)}});function Pe(e,n){if(e===n)return{valid:!0,data:e};if(e instanceof Date&&n instanceof Date&&+e==+n)return{valid:!0,data:e};if(on(e)&&on(n)){const t=Object.keys(n),r=Object.keys(e).filter(a=>t.indexOf(a)!==-1),s={...e,...n};for(const a of r){const c=Pe(e[a],n[a]);if(!c.valid)return{valid:!1,mergeErrorPath:[a,...c.mergeErrorPath]};s[a]=c.data}return{valid:!0,data:s}}if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return{valid:!1,mergeErrorPath:[]};const t=[];for(let r=0;r<e.length;r++){const s=e[r],a=n[r],c=Pe(s,a);if(!c.valid)return{valid:!1,mergeErrorPath:[r,...c.mergeErrorPath]};t.push(c.data)}return{valid:!0,data:t}}return{valid:!1,mergeErrorPath:[]}}function ln(e,n,t){if(n.issues.length&&e.issues.push(...n.issues),t.issues.length&&e.issues.push(...t.issues),V(e))return e;const r=Pe(n.value,t.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}const wo=h("$ZodTransform",(e,n)=>{y.init(e,n),e._zod.parse=(t,r)=>{const s=n.transform(t.value,t);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(c=>(t.value=c,t));if(s instanceof Promise)throw new Ne;return t.value=s,t}}),jo=h("$ZodOptional",(e,n)=>{y.init(e,n),e._zod.optin="optional",e._zod.optout="optional",_(e._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,void 0]):void 0),_(e._zod,"pattern",()=>{const t=n.innerType._zod.pattern;return t?new RegExp(`^(${De(t.source)})?$`):void 0}),e._zod.parse=(t,r)=>t.value===void 0?t:n.innerType._zod.run(t,r)}),bo=h("$ZodNullable",(e,n)=>{y.init(e,n),_(e._zod,"optin",()=>n.innerType._zod.optin),_(e._zod,"optout",()=>n.innerType._zod.optout),_(e._zod,"pattern",()=>{const t=n.innerType._zod.pattern;return t?new RegExp(`^(${De(t.source)}|null)$`):void 0}),_(e._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,null]):void 0),e._zod.parse=(t,r)=>t.value===null?t:n.innerType._zod.run(t,r)}),ko=h("$ZodDefault",(e,n)=>{y.init(e,n),e._zod.optin="optional",_(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(t,r)=>{if(t.value===void 0)return t.value=n.defaultValue,t;const s=n.innerType._zod.run(t,r);return s instanceof Promise?s.then(a=>hn(a,n)):hn(s,n)}});function hn(e,n){return e.value===void 0&&(e.value=n.defaultValue),e}const yo=h("$ZodPrefault",(e,n)=>{y.init(e,n),e._zod.optin="optional",_(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(t,r)=>(t.value===void 0&&(t.value=n.defaultValue),n.innerType._zod.run(t,r))}),Mo=h("$ZodNonOptional",(e,n)=>{y.init(e,n),_(e._zod,"values",()=>{const t=n.innerType._zod.values;return t?new Set([...t].filter(r=>r!==void 0)):void 0}),e._zod.parse=(t,r)=>{const s=n.innerType._zod.run(t,r);return s instanceof Promise?s.then(a=>pn(a,e)):pn(s,e)}});function pn(e,n){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:n}),e}const No=h("$ZodCatch",(e,n)=>{y.init(e,n),_(e._zod,"optin",()=>n.innerType._zod.optin),_(e._zod,"optout",()=>n.innerType._zod.optout),_(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(t,r)=>{const s=n.innerType._zod.run(t,r);return s instanceof Promise?s.then(a=>(t.value=a.value,a.issues.length&&(t.value=n.catchValue({...t,error:{issues:a.issues.map(c=>Ce(c,r,ze()))},input:t.value}),t.issues=[]),t)):(t.value=s.value,s.issues.length&&(t.value=n.catchValue({...t,error:{issues:s.issues.map(a=>Ce(a,r,ze()))},input:t.value}),t.issues=[]),t)}}),Co=h("$ZodPipe",(e,n)=>{y.init(e,n),_(e._zod,"values",()=>n.in._zod.values),_(e._zod,"optin",()=>n.in._zod.optin),_(e._zod,"optout",()=>n.out._zod.optout),e._zod.parse=(t,r)=>{const s=n.in._zod.run(t,r);return s instanceof Promise?s.then(a=>mn(a,n,r)):mn(s,n,r)}});function mn(e,n,t){return V(e)?e:n.out._zod.run({value:e.value,issues:e.issues},t)}const zo=h("$ZodReadonly",(e,n)=>{y.init(e,n),_(e._zod,"propValues",()=>n.innerType._zod.propValues),_(e._zod,"optin",()=>n.innerType._zod.optin),_(e._zod,"optout",()=>n.innerType._zod.optout),e._zod.parse=(t,r)=>{const s=n.innerType._zod.run(t,r);return s instanceof Promise?s.then(fn):fn(s)}});function fn(e){return e.value=Object.freeze(e.value),e}const Po=h("$ZodCustom",(e,n)=>{E.init(e,n),y.init(e,n),e._zod.parse=(t,r)=>t,e._zod.check=t=>{const r=t.value,s=n.fn(r);if(s instanceof Promise)return s.then(a=>gn(a,t,r,e));gn(s,t,r,e)}});function gn(e,n,t,r){if(!e){const s={code:"custom",input:t,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(s.params=r._zod.def.params),n.issues.push(W(s))}}class So{constructor(){this._map=new WeakMap,this._idmap=new Map}add(n,...t){const r=t[0];if(this._map.set(n,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,n)}return this}remove(n){return this._map.delete(n),this}get(n){const t=n._zod.parent;if(t){const r={...this.get(t)??{}};return delete r.id,{...r,...this._map.get(n)}}return this._map.get(n)}has(n){return this._map.has(n)}}function Ro(){return new So}const se=Ro();function Eo(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...k(n)})}function $n(e,n){return new oo({check:"max_length",...k(n),maximum:e})}function ce(e,n){return new so({check:"min_length",...k(n),minimum:e})}function On(e,n){return new ao({check:"length_equals",...k(n),length:e})}function Io(e,n){return new co({check:"string_format",format:"regex",...k(n),pattern:e})}function Ao(e){return new io({check:"string_format",format:"lowercase",...k(e)})}function To(e){return new uo({check:"string_format",format:"uppercase",...k(e)})}function Do(e,n){return new lo({check:"string_format",format:"includes",...k(n),includes:e})}function $o(e,n){return new ho({check:"string_format",format:"starts_with",...k(n),prefix:e})}function Oo(e,n){return new po({check:"string_format",format:"ends_with",...k(n),suffix:e})}function J(e){return new mo({check:"overwrite",tx:e})}function Zo(e){return J(n=>n.normalize(e))}function Lo(){return J(e=>e.trim())}function Fo(){return J(e=>e.toLowerCase())}function Uo(){return J(e=>e.toUpperCase())}function Go(e,n,t){return new e({type:"array",element:n,...k(t)})}function Ko(e,n,t){return new e({type:"custom",check:"custom",fn:n,...k(t)})}const Bo=(e,n=7)=>{const{accessToken:t}=Y();return Re({queryKey:["notes",e],queryFn:async()=>{const r=await fetch(`/api/note?page=${e}&limit=${n}`,{headers:{Authorization:`Bearer ${t}`}});if(!r.ok)throw new Error("Failed to fetch notes");return r.json()}})},Vo=(e,n,t=7)=>{const{accessToken:r}=Y();return Re({queryKey:["notesSearch",e,n],queryFn:async()=>await fetch(`/api/note/search?term=${e}&page=${n}&limit=${t}`,{headers:{Authorization:`Bearer ${r}`}}).then(async s=>{if(s.status===404)return[];if(!s.ok)throw new Error((await s.json()).error);return s.json()}),enabled:!!e})};var Se=["Enter"," "],Wo=["ArrowDown","PageUp","Home"],Zn=["ArrowUp","PageDown","End"],qo=[...Wo,...Zn],Ho={ltr:[...Se,"ArrowRight"],rtl:[...Se,"ArrowLeft"]},Yo={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ee="Menu",[q,Xo,Qo]=Jt(ee),[T,Ln]=kn(ee,[Qo,Nn,Pn]),fe=Nn(),Fn=Pn(),[Jo,D]=T(ee),[es,ne]=T(ee),Un=e=>{const{__scopeMenu:n,open:t=!1,children:r,dir:s,onOpenChange:a,modal:c=!0}=e,u=fe(n),[l,m]=i.useState(null),p=i.useRef(!1),d=yn(a),g=er(s);return i.useEffect(()=>{const b=()=>{p.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>p.current=!1;return document.addEventListener("keydown",b,{capture:!0}),()=>{document.removeEventListener("keydown",b,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),o.jsx(Ft,{...u,children:o.jsx(Jo,{scope:n,open:t,onOpenChange:d,content:l,onContentChange:m,children:o.jsx(es,{scope:n,onClose:i.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:p,dir:g,modal:c,children:r})})})};Un.displayName=ee;var ns="MenuAnchor",$e=i.forwardRef((e,n)=>{const{__scopeMenu:t,...r}=e,s=fe(t);return o.jsx(Ut,{...s,...r,ref:n})});$e.displayName=ns;var Oe="MenuPortal",[ts,Gn]=T(Oe,{forceMount:void 0}),Kn=e=>{const{__scopeMenu:n,forceMount:t,children:r,container:s}=e,a=D(Oe,n);return o.jsx(ts,{scope:n,forceMount:t,children:o.jsx(de,{present:t||a.open,children:o.jsx(zt,{asChild:!0,container:s,children:r})})})};Kn.displayName=Oe;var z="MenuContent",[rs,Ze]=T(z),Bn=i.forwardRef((e,n)=>{const t=Gn(z,e.__scopeMenu),{forceMount:r=t.forceMount,...s}=e,a=D(z,e.__scopeMenu),c=ne(z,e.__scopeMenu);return o.jsx(q.Provider,{scope:e.__scopeMenu,children:o.jsx(de,{present:r||a.open,children:o.jsx(q.Slot,{scope:e.__scopeMenu,children:c.modal?o.jsx(os,{...s,ref:n}):o.jsx(ss,{...s,ref:n})})})})}),os=i.forwardRef((e,n)=>{const t=D(z,e.__scopeMenu),r=i.useRef(null),s=X(n,r);return i.useEffect(()=>{const a=r.current;if(a)return Pt(a)},[]),o.jsx(Le,{...e,ref:s,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:x(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),ss=i.forwardRef((e,n)=>{const t=D(z,e.__scopeMenu);return o.jsx(Le,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),as=It("MenuContent.ScrollLock"),Le=i.forwardRef((e,n)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:c,disableOutsidePointerEvents:u,onEntryFocus:l,onEscapeKeyDown:m,onPointerDownOutside:p,onFocusOutside:d,onInteractOutside:g,onDismiss:b,disableOutsideScroll:v,...S}=e,w=D(z,t),$=ne(z,t),wt=fe(t),jt=Fn(t),qe=Xo(t),[bt,He]=i.useState(null),te=i.useRef(null),kt=X(n,te,w.onContentChange),re=i.useRef(0),oe=i.useRef(""),yt=i.useRef(0),_e=i.useRef(null),Ye=i.useRef("right"),we=i.useRef(0),Mt=v?Et:i.Fragment,Nt=v?{as,allowPinchZoom:!0}:void 0,Ct=f=>{const Z=oe.current+f,A=qe().filter(C=>!C.disabled),G=document.activeElement,je=A.find(C=>C.ref.current===G)?.textValue,be=A.map(C=>C.textValue),Xe=vs(be,Z,je),K=A.find(C=>C.textValue===Xe)?.ref.current;(function C(Qe){oe.current=Qe,window.clearTimeout(re.current),Qe!==""&&(re.current=window.setTimeout(()=>C(""),1e3))})(Z),K&&setTimeout(()=>K.focus())};i.useEffect(()=>()=>window.clearTimeout(re.current),[]),Rt();const O=i.useCallback(f=>Ye.current===_e.current?.side&&ws(f,_e.current?.area),[]);return o.jsx(rs,{scope:t,searchRef:oe,onItemEnter:i.useCallback(f=>{O(f)&&f.preventDefault()},[O]),onItemLeave:i.useCallback(f=>{O(f)||(te.current?.focus(),He(null))},[O]),onTriggerLeave:i.useCallback(f=>{O(f)&&f.preventDefault()},[O]),pointerGraceTimerRef:yt,onPointerGraceIntentChange:i.useCallback(f=>{_e.current=f},[]),children:o.jsx(Mt,{...Nt,children:o.jsx(At,{asChild:!0,trapped:s,onMountAutoFocus:x(a,f=>{f.preventDefault(),te.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:c,children:o.jsx(Tt,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:m,onPointerDownOutside:p,onFocusOutside:d,onInteractOutside:g,onDismiss:b,children:o.jsx(tr,{asChild:!0,...jt,dir:$.dir,orientation:"vertical",loop:r,currentTabStopId:bt,onCurrentTabStopIdChange:He,onEntryFocus:x(l,f=>{$.isUsingKeyboardRef.current||f.preventDefault()}),preventScrollOnEntryFocus:!0,children:o.jsx(Gt,{role:"menu","aria-orientation":"vertical","data-state":ct(w.open),"data-radix-menu-content":"",dir:$.dir,...wt,...S,ref:kt,style:{outline:"none",...S.style},onKeyDown:x(S.onKeyDown,f=>{const A=f.target.closest("[data-radix-menu-content]")===f.currentTarget,G=f.ctrlKey||f.altKey||f.metaKey,je=f.key.length===1;A&&(f.key==="Tab"&&f.preventDefault(),!G&&je&&Ct(f.key));const be=te.current;if(f.target!==be||!qo.includes(f.key))return;f.preventDefault();const K=qe().filter(C=>!C.disabled).map(C=>C.ref.current);Zn.includes(f.key)&&K.reverse(),gs(K)}),onBlur:x(e.onBlur,f=>{f.currentTarget.contains(f.target)||(window.clearTimeout(re.current),oe.current="")}),onPointerMove:x(e.onPointerMove,H(f=>{const Z=f.target,A=we.current!==f.clientX;if(f.currentTarget.contains(Z)&&A){const G=f.clientX>we.current?"right":"left";Ye.current=G,we.current=f.clientX}}))})})})})})})});Bn.displayName=z;var cs="MenuGroup",Fe=i.forwardRef((e,n)=>{const{__scopeMenu:t,...r}=e;return o.jsx(U.div,{role:"group",...r,ref:n})});Fe.displayName=cs;var is="MenuLabel",Vn=i.forwardRef((e,n)=>{const{__scopeMenu:t,...r}=e;return o.jsx(U.div,{...r,ref:n})});Vn.displayName=is;var ie="MenuItem",xn="menu.itemSelect",ge=i.forwardRef((e,n)=>{const{disabled:t=!1,onSelect:r,...s}=e,a=i.useRef(null),c=ne(ie,e.__scopeMenu),u=Ze(ie,e.__scopeMenu),l=X(n,a),m=i.useRef(!1),p=()=>{const d=a.current;if(!t&&d){const g=new CustomEvent(xn,{bubbles:!0,cancelable:!0});d.addEventListener(xn,b=>r?.(b),{once:!0}),St(d,g),g.defaultPrevented?m.current=!1:c.onClose()}};return o.jsx(Wn,{...s,ref:l,disabled:t,onClick:x(e.onClick,p),onPointerDown:d=>{e.onPointerDown?.(d),m.current=!0},onPointerUp:x(e.onPointerUp,d=>{m.current||d.currentTarget?.click()}),onKeyDown:x(e.onKeyDown,d=>{const g=u.searchRef.current!=="";t||g&&d.key===" "||Se.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});ge.displayName=ie;var Wn=i.forwardRef((e,n)=>{const{__scopeMenu:t,disabled:r=!1,textValue:s,...a}=e,c=Ze(ie,t),u=Fn(t),l=i.useRef(null),m=X(n,l),[p,d]=i.useState(!1),[g,b]=i.useState("");return i.useEffect(()=>{const v=l.current;v&&b((v.textContent??"").trim())},[a.children]),o.jsx(q.ItemSlot,{scope:t,disabled:r,textValue:s??g,children:o.jsx(nr,{asChild:!0,...u,focusable:!r,children:o.jsx(U.div,{role:"menuitem","data-highlighted":p?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:m,onPointerMove:x(e.onPointerMove,H(v=>{r?c.onItemLeave(v):(c.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:x(e.onPointerLeave,H(v=>c.onItemLeave(v))),onFocus:x(e.onFocus,()=>d(!0)),onBlur:x(e.onBlur,()=>d(!1))})})})}),us="MenuCheckboxItem",qn=i.forwardRef((e,n)=>{const{checked:t=!1,onCheckedChange:r,...s}=e;return o.jsx(Jn,{scope:e.__scopeMenu,checked:t,children:o.jsx(ge,{role:"menuitemcheckbox","aria-checked":ue(t)?"mixed":t,...s,ref:n,"data-state":Ge(t),onSelect:x(s.onSelect,()=>r?.(ue(t)?!0:!t),{checkForDefaultPrevented:!1})})})});qn.displayName=us;var Hn="MenuRadioGroup",[ds,ls]=T(Hn,{value:void 0,onValueChange:()=>{}}),Yn=i.forwardRef((e,n)=>{const{value:t,onValueChange:r,...s}=e,a=yn(r);return o.jsx(ds,{scope:e.__scopeMenu,value:t,onValueChange:a,children:o.jsx(Fe,{...s,ref:n})})});Yn.displayName=Hn;var Xn="MenuRadioItem",Qn=i.forwardRef((e,n)=>{const{value:t,...r}=e,s=ls(Xn,e.__scopeMenu),a=t===s.value;return o.jsx(Jn,{scope:e.__scopeMenu,checked:a,children:o.jsx(ge,{role:"menuitemradio","aria-checked":a,...r,ref:n,"data-state":Ge(a),onSelect:x(r.onSelect,()=>s.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});Qn.displayName=Xn;var Ue="MenuItemIndicator",[Jn,hs]=T(Ue,{checked:!1}),et=i.forwardRef((e,n)=>{const{__scopeMenu:t,forceMount:r,...s}=e,a=hs(Ue,t);return o.jsx(de,{present:r||ue(a.checked)||a.checked===!0,children:o.jsx(U.span,{...s,ref:n,"data-state":Ge(a.checked)})})});et.displayName=Ue;var ps="MenuSeparator",nt=i.forwardRef((e,n)=>{const{__scopeMenu:t,...r}=e;return o.jsx(U.div,{role:"separator","aria-orientation":"horizontal",...r,ref:n})});nt.displayName=ps;var ms="MenuArrow",tt=i.forwardRef((e,n)=>{const{__scopeMenu:t,...r}=e,s=fe(t);return o.jsx(Kt,{...s,...r,ref:n})});tt.displayName=ms;var fs="MenuSub",[_c,rt]=T(fs),B="MenuSubTrigger",ot=i.forwardRef((e,n)=>{const t=D(B,e.__scopeMenu),r=ne(B,e.__scopeMenu),s=rt(B,e.__scopeMenu),a=Ze(B,e.__scopeMenu),c=i.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:l}=a,m={__scopeMenu:e.__scopeMenu},p=i.useCallback(()=>{c.current&&window.clearTimeout(c.current),c.current=null},[]);return i.useEffect(()=>p,[p]),i.useEffect(()=>{const d=u.current;return()=>{window.clearTimeout(d),l(null)}},[u,l]),o.jsx($e,{asChild:!0,...m,children:o.jsx(Wn,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":s.contentId,"data-state":ct(t.open),...e,ref:Mn(n,s.onTriggerChange),onClick:d=>{e.onClick?.(d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:x(e.onPointerMove,H(d=>{a.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!t.open&&!c.current&&(a.onPointerGraceIntentChange(null),c.current=window.setTimeout(()=>{t.onOpenChange(!0),p()},100))})),onPointerLeave:x(e.onPointerLeave,H(d=>{p();const g=t.content?.getBoundingClientRect();if(g){const b=t.content?.dataset.side,v=b==="right",S=v?-5:5,w=g[v?"left":"right"],$=g[v?"right":"left"];a.onPointerGraceIntentChange({area:[{x:d.clientX+S,y:d.clientY},{x:w,y:g.top},{x:$,y:g.top},{x:$,y:g.bottom},{x:w,y:g.bottom}],side:b}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(d),d.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:x(e.onKeyDown,d=>{const g=a.searchRef.current!=="";e.disabled||g&&d.key===" "||Ho[r.dir].includes(d.key)&&(t.onOpenChange(!0),t.content?.focus(),d.preventDefault())})})})});ot.displayName=B;var st="MenuSubContent",at=i.forwardRef((e,n)=>{const t=Gn(z,e.__scopeMenu),{forceMount:r=t.forceMount,...s}=e,a=D(z,e.__scopeMenu),c=ne(z,e.__scopeMenu),u=rt(st,e.__scopeMenu),l=i.useRef(null),m=X(n,l);return o.jsx(q.Provider,{scope:e.__scopeMenu,children:o.jsx(de,{present:r||a.open,children:o.jsx(q.Slot,{scope:e.__scopeMenu,children:o.jsx(Le,{id:u.contentId,"aria-labelledby":u.triggerId,...s,ref:m,align:"start",side:c.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:p=>{c.isUsingKeyboardRef.current&&l.current?.focus(),p.preventDefault()},onCloseAutoFocus:p=>p.preventDefault(),onFocusOutside:x(e.onFocusOutside,p=>{p.target!==u.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:x(e.onEscapeKeyDown,p=>{c.onClose(),p.preventDefault()}),onKeyDown:x(e.onKeyDown,p=>{const d=p.currentTarget.contains(p.target),g=Yo[c.dir].includes(p.key);d&&g&&(a.onOpenChange(!1),u.trigger?.focus(),p.preventDefault())})})})})})});at.displayName=st;function ct(e){return e?"open":"closed"}function ue(e){return e==="indeterminate"}function Ge(e){return ue(e)?"indeterminate":e?"checked":"unchecked"}function gs(e){const n=document.activeElement;for(const t of e)if(t===n||(t.focus(),document.activeElement!==n))return}function xs(e,n){return e.map((t,r)=>e[(n+r)%e.length])}function vs(e,n,t){const s=n.length>1&&Array.from(n).every(m=>m===n[0])?n[0]:n,a=t?e.indexOf(t):-1;let c=xs(e,Math.max(a,0));s.length===1&&(c=c.filter(m=>m!==t));const l=c.find(m=>m.toLowerCase().startsWith(s.toLowerCase()));return l!==t?l:void 0}function _s(e,n){const{x:t,y:r}=e;let s=!1;for(let a=0,c=n.length-1;a<n.length;c=a++){const u=n[a],l=n[c],m=u.x,p=u.y,d=l.x,g=l.y;p>r!=g>r&&t<(d-m)*(r-p)/(g-p)+m&&(s=!s)}return s}function ws(e,n){if(!n)return!1;const t={x:e.clientX,y:e.clientY};return _s(t,n)}function H(e){return n=>n.pointerType==="mouse"?e(n):void 0}var js=Un,bs=$e,ks=Kn,ys=Bn,Ms=Fe,Ns=Vn,Cs=ge,zs=qn,Ps=Yn,Ss=Qn,Rs=et,Es=nt,Is=tt,As=ot,Ts=at,xe="DropdownMenu",[Ds,wc]=kn(xe,[Ln]),M=Ln(),[$s,it]=Ds(xe),ut=e=>{const{__scopeDropdownMenu:n,children:t,dir:r,open:s,defaultOpen:a,onOpenChange:c,modal:u=!0}=e,l=M(n),m=i.useRef(null),[p,d]=Dt({prop:s,defaultProp:a??!1,onChange:c,caller:xe});return o.jsx($s,{scope:n,triggerId:Je(),triggerRef:m,contentId:Je(),open:p,onOpenChange:d,onOpenToggle:i.useCallback(()=>d(g=>!g),[d]),modal:u,children:o.jsx(js,{...l,open:p,onOpenChange:d,dir:r,modal:u,children:t})})};ut.displayName=xe;var dt="DropdownMenuTrigger",lt=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...s}=e,a=it(dt,t),c=M(t);return o.jsx(bs,{asChild:!0,...c,children:o.jsx(U.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Mn(n,a.triggerRef),onPointerDown:x(e.onPointerDown,u=>{!r&&u.button===0&&u.ctrlKey===!1&&(a.onOpenToggle(),a.open||u.preventDefault())}),onKeyDown:x(e.onKeyDown,u=>{r||(["Enter"," "].includes(u.key)&&a.onOpenToggle(),u.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})})})});lt.displayName=dt;var Os="DropdownMenuPortal",ht=e=>{const{__scopeDropdownMenu:n,...t}=e,r=M(n);return o.jsx(ks,{...r,...t})};ht.displayName=Os;var pt="DropdownMenuContent",mt=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=it(pt,t),a=M(t),c=i.useRef(!1);return o.jsx(ys,{id:s.contentId,"aria-labelledby":s.triggerId,...a,...r,ref:n,onCloseAutoFocus:x(e.onCloseAutoFocus,u=>{c.current||s.triggerRef.current?.focus(),c.current=!1,u.preventDefault()}),onInteractOutside:x(e.onInteractOutside,u=>{const l=u.detail.originalEvent,m=l.button===0&&l.ctrlKey===!0,p=l.button===2||m;(!s.modal||p)&&(c.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});mt.displayName=pt;var Zs="DropdownMenuGroup",ft=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=M(t);return o.jsx(Ms,{...s,...r,ref:n})});ft.displayName=Zs;var Ls="DropdownMenuLabel",gt=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=M(t);return o.jsx(Ns,{...s,...r,ref:n})});gt.displayName=Ls;var Fs="DropdownMenuItem",xt=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=M(t);return o.jsx(Cs,{...s,...r,ref:n})});xt.displayName=Fs;var Us="DropdownMenuCheckboxItem",Gs=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=M(t);return o.jsx(zs,{...s,...r,ref:n})});Gs.displayName=Us;var Ks="DropdownMenuRadioGroup",Bs=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=M(t);return o.jsx(Ps,{...s,...r,ref:n})});Bs.displayName=Ks;var Vs="DropdownMenuRadioItem",Ws=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=M(t);return o.jsx(Ss,{...s,...r,ref:n})});Ws.displayName=Vs;var qs="DropdownMenuItemIndicator",Hs=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=M(t);return o.jsx(Rs,{...s,...r,ref:n})});Hs.displayName=qs;var Ys="DropdownMenuSeparator",vt=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=M(t);return o.jsx(Es,{...s,...r,ref:n})});vt.displayName=Ys;var Xs="DropdownMenuArrow",Qs=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=M(t);return o.jsx(Is,{...s,...r,ref:n})});Qs.displayName=Xs;var Js="DropdownMenuSubTrigger",ea=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=M(t);return o.jsx(As,{...s,...r,ref:n})});ea.displayName=Js;var na="DropdownMenuSubContent",ta=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=M(t);return o.jsx(Ts,{...s,...r,ref:n,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ta.displayName=na;var ra=ut,oa=lt,sa=ht,aa=mt,ca=ft,ia=gt,ua=xt,da=vt;function Ke({...e}){return o.jsx(ra,{"data-slot":"dropdown-menu",...e})}function Be({...e}){return o.jsx(oa,{"data-slot":"dropdown-menu-trigger",...e})}function Ve({className:e,sideOffset:n=4,...t}){return o.jsx(sa,{children:o.jsx(aa,{"data-slot":"dropdown-menu-content",sideOffset:n,className:le("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...t})})}function vn({...e}){return o.jsx(ca,{"data-slot":"dropdown-menu-group",...e})}function I({className:e,inset:n,variant:t="default",...r}){return o.jsx(ua,{"data-slot":"dropdown-menu-item","data-inset":n,"data-variant":t,className:le("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function la({className:e,inset:n,...t}){return o.jsx(ia,{"data-slot":"dropdown-menu-label","data-inset":n,className:le("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",e),...t})}function ae({className:e,...n}){return o.jsx(da,{"data-slot":"dropdown-menu-separator",className:le("bg-border -mx-1 my-1 h-px",e),...n})}function _n({note:e}){const{isMobile:n}=pe(),{setSelectedNoteId:t}=rr(),r=he(),s=or(),a=c=>{t(c),r("/note")};return o.jsxs(R,{children:[o.jsx(P,{asChild:!0,children:o.jsxs("button",{onClick:()=>a(e.id),children:[o.jsx(Sn,{className:"h-4 w-4 text-muted-foreground hover:text-primary"}),o.jsx("span",{children:e.title})]})}),o.jsxs(Ke,{children:[o.jsx(Be,{asChild:!0,children:o.jsxs(Cn,{showOnHover:!0,children:[o.jsx(L,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"More"})]})}),o.jsxs(Ve,{className:"w-48 rounded-lg",side:n?"bottom":"right",align:n?"end":"start",children:[e.isPublished&&o.jsxs(o.Fragment,{children:[o.jsx("a",{href:"/post/"+e.id,children:o.jsxs(I,{children:[o.jsx(Zr,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{children:"View post"})]})}),o.jsx(ae,{})]}),o.jsxs(I,{onClick:()=>s.mutate(e.id),children:[o.jsx(An,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{children:"Delete Note"})]})]})]})]})}function ha({value:e,setValue:n}){const t=sr(),r=he(),s=()=>{t.mutate(),r("/note")};return o.jsxs(Q,{children:[o.jsx(R,{children:o.jsxs(P,{disabled:t.isPending,tooltip:"Create new",onClick:s,children:[t.isPending?o.jsx(cr,{className:"h-4 w-4 animate-spin"}):o.jsx(Xr,{className:"h-4 w-4"}),o.jsx("span",{children:"Create Note"})]})}),o.jsx(R,{children:o.jsx(ar,{Component:Bt,classname:"bg-transparent dark:bg-transparent border-none ",value:e,setValue:n,placeholder:"Search notes..."})})]})}function pa(){const[e,n]=i.useState(1),{data:t,isLoading:r,error:s}=Bo(e),a=t?.notes??[],c=t?Math.ceil(t.total/t.limit):1,[u,l]=i.useState(""),[m,p]=i.useState(1),{data:d,isLoading:g,error:b}=Vo(u,m),v=d?.notes??[],S=d?Math.ceil(d.total/d.limit)-1:1;return o.jsxs(Ee,{className:"group-data-[collapsible=icon]:hidden",children:[o.jsx(F,{}),o.jsx(ha,{value:u,setValue:l}),o.jsx(zn,{}),o.jsx(F,{children:"Notes"}),o.jsx(Q,{className:"max-h-[calc(100vh-12rem)] overflow-y-none",children:r||g&&u!==""?o.jsx(R,{children:o.jsxs(P,{className:"text-muted-foreground",children:[o.jsx(L,{className:"h-4 w-4"}),o.jsx("span",{children:"Loading..."})]})}):s||b&&u!==""?o.jsx(R,{children:o.jsxs(P,{className:"text-destructive",children:[o.jsx(In,{className:"h-4 w-4"}),o.jsx("span",{children:(s||b)?.message})]})}):u===""?a?.length?o.jsxs(o.Fragment,{children:[a.map(w=>o.jsx(_n,{note:w},w.id)),c>1&&o.jsxs("div",{className:"flex justify-center *:w-full",children:[o.jsx("button",{className:"place-items-center",disabled:e===1,onClick:()=>n(w=>w-1),children:o.jsx(an,{color:e==1?"#71717b50":"#8e51ff",size:20})}),o.jsx(L,{color:"#8e51ff",size:20}),o.jsx("button",{className:"place-items-center",disabled:e===c,onClick:()=>n(w=>w+1),children:o.jsx(rn,{color:e==c?"#71717b50":"#8e51ff",size:20})})]})]}):o.jsx("p",{className:"text-gray-500 self-center text-sm p-2",children:"No notes found"}):v?.length?o.jsxs(o.Fragment,{children:[v.map(w=>o.jsx(_n,{note:w},w.id)),S>1&&o.jsxs("div",{className:"flex justify-center *:w-full",children:[o.jsx("button",{className:"place-items-center",disabled:m===1,onClick:()=>p(w=>w-1),children:o.jsx(an,{color:m==1?"#71717b50":"#8e51ff",size:20})}),o.jsx(L,{color:"#8e51ff",size:20}),o.jsx("button",{className:"place-items-center",disabled:m===S,onClick:()=>p(w=>w+1),children:o.jsx(rn,{color:m==S?"#71717b50":"#8e51ff",size:20})})]})]}):o.jsx("p",{className:"text-gray-500 text-sm p-2",children:"No matches"})})]})}function ma({setNav:e,nav:n}){const t=n==="notes";return o.jsx("button",{onClick:()=>e("notes"),title:"Notes",className:`
        grid place-items-center size-8 rounded-2xl shadow-md transition
        hover:scale-105 hover:bg-zinc-200 dark:hover:bg-zinc-700
        ${t?"bg-zinc-100 dark:bg-zinc-800":""}
      `,children:o.jsx(Wr,{className:`h-5 w-5 ${t?"text-violet-500":"text-zinc-500 dark:text-zinc-800"}`})})}function fa({user:e}){const{isMobile:n}=pe(),{clearAuth:t}=Y(),r=$t({mutationKey:["logout"],mutationFn:async()=>{if(!(await fetch("/api/auth/logout",{method:"POST",credentials:"include"})).ok)throw new Error("Logout failed")},onSuccess:()=>{t()},onError:s=>{console.error("Logout failed",s)}});return o.jsx(Q,{children:o.jsx(R,{children:o.jsxs(Ke,{children:[o.jsx(Be,{asChild:!0,children:o.jsxs(P,{size:"lg",className:"data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground",children:[o.jsxs(ke,{className:"h-8 w-8 rounded-lg",children:[o.jsx(ye,{src:e.avatar,alt:e.name}),o.jsx(Me,{className:"rounded-lg",children:"CN"})]}),o.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[o.jsx("span",{className:"truncate font-medium",children:e.name}),o.jsx("span",{className:"truncate text-xs",children:e.email})]}),o.jsx(Rr,{className:"ml-auto size-4"})]})}),o.jsxs(Ve,{className:"w-(--radix-dropdown-menu-trigger-width) min-w-56 rounded-lg",side:n?"bottom":"right",align:"end",sideOffset:4,children:[o.jsx(la,{className:"p-0 font-normal",children:o.jsxs("div",{className:"flex items-center gap-2 px-1 py-1.5 text-left text-sm",children:[o.jsxs(ke,{className:"h-8 w-8 rounded-lg",children:[o.jsx(ye,{src:e.avatar,alt:e.name}),o.jsx(Me,{className:"rounded-lg",children:"CN"})]}),o.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[o.jsx("span",{className:"truncate font-medium",children:e.name}),o.jsx("span",{className:"truncate text-xs",children:e.email})]})]})}),o.jsx(ae,{}),o.jsx(vn,{children:o.jsxs(I,{children:[o.jsx(Hr,{}),"Upgrade to Pro"]})}),o.jsx(ae,{}),o.jsxs(vn,{children:[o.jsxs(I,{children:[o.jsx(yr,{}),"Account"]}),o.jsxs(I,{children:[o.jsx(Dr,{}),"Billing"]}),o.jsxs(I,{children:[o.jsx(En,{}),"Notifications"]})]}),o.jsx(ae,{}),o.jsxs(I,{onClick:()=>r.mutate(),children:[o.jsx(Fr,{}),"Log out",r.isPending&&o.jsx(ir,{className:"inline mx-2 animate-spin",size:10})]})]})]})})})}function _t(){const{theme:e,setTheme:n}=ur();i.useEffect(()=>{const r=localStorage.getItem("theme");if(r)n(r),document.documentElement.classList.toggle("dark",r==="dark");else{const s=window.matchMedia("(prefers-color-scheme: dark)").matches;n(s?"dark":"light"),document.documentElement.classList.toggle("dark",s)}},[n]);const t=()=>{const r=e==="light"?"dark":"light";n(r),localStorage.setItem("theme",r),document.documentElement.classList.toggle("dark",r==="dark")};return o.jsx("button",{onClick:t,className:"place-items-center rounded-2xl size-8  shadow-md transition hover:scale-105 hover:bg-zinc-200 dark:hover:bg-zinc-700",title:"theme switcher",children:e==="light"?o.jsx(Br,{className:"h-5 w-5 text-zinc-500 dark:text-zinc-800'"}):o.jsx(Jr,{className:"h-5 w-5 text-yellow-400"})})}const ga=(e,n)=>{mr.init(e,n),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>gr(e,t)},flatten:{value:t=>fr(e,t)},addIssue:{value:t=>e.issues.push(t)},addIssues:{value:t=>e.issues.push(...t)},isEmpty:{get(){return e.issues.length===0}}})},ve=h("ZodError",ga,{Parent:Error}),xa=xr(ve),va=_r(ve),_a=vr(ve),wa=wr(ve),N=h("ZodType",(e,n)=>(y.init(e,n),e.def=n,Object.defineProperty(e,"_def",{value:n}),e.check=(...t)=>e.clone({...n,checks:[...n.checks??[],...t.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),e.clone=(t,r)=>jr(e,t,r),e.brand=()=>e,e.register=(t,r)=>(t.add(e,r),e),e.parse=(t,r)=>xa(e,t,r,{callee:e.parse}),e.safeParse=(t,r)=>_a(e,t,r),e.parseAsync=async(t,r)=>va(e,t,r,{callee:e.parseAsync}),e.safeParseAsync=async(t,r)=>wa(e,t,r),e.spa=e.safeParseAsync,e.refine=(t,r)=>e.check(qa(t,r)),e.superRefine=t=>e.check(Ha(t)),e.overwrite=t=>e.check(J(t)),e.optional=()=>wn(e),e.nullable=()=>jn(e),e.nullish=()=>wn(jn(e)),e.nonoptional=t=>La(e,t),e.array=()=>Na(e),e.or=t=>za([e,t]),e.and=t=>Sa(e,t),e.transform=t=>bn(e,Ea(t)),e.default=t=>Da(e,t),e.prefault=t=>Oa(e,t),e.catch=t=>Ua(e,t),e.pipe=t=>bn(e,t),e.readonly=()=>Ba(e),e.describe=t=>{const r=e.clone();return se.add(r,{description:t}),r},Object.defineProperty(e,"description",{get(){return se.get(e)?.description},configurable:!0}),e.meta=(...t)=>{if(t.length===0)return se.get(e);const r=e.clone();return se.add(r,t[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),ja=h("_ZodString",(e,n)=>{Tn.init(e,n),N.init(e,n);const t=e._zod.bag;e.format=t.format??null,e.minLength=t.minimum??null,e.maxLength=t.maximum??null,e.regex=(...r)=>e.check(Io(...r)),e.includes=(...r)=>e.check(Do(...r)),e.startsWith=(...r)=>e.check($o(...r)),e.endsWith=(...r)=>e.check(Oo(...r)),e.min=(...r)=>e.check(ce(...r)),e.max=(...r)=>e.check($n(...r)),e.length=(...r)=>e.check(On(...r)),e.nonempty=(...r)=>e.check(ce(1,...r)),e.lowercase=r=>e.check(Ao(r)),e.uppercase=r=>e.check(To(r)),e.trim=()=>e.check(Lo()),e.normalize=(...r)=>e.check(Zo(...r)),e.toLowerCase=()=>e.check(Fo()),e.toUpperCase=()=>e.check(Uo())}),ba=h("ZodStringFormat",(e,n)=>{Dn.init(e,n),ja.init(e,n)}),ka=h("ZodUUID",(e,n)=>{go.init(e,n),ba.init(e,n)});function ya(e){return Eo(ka,e)}const Ma=h("ZodArray",(e,n)=>{xo.init(e,n),N.init(e,n),e.element=n.element,e.min=(t,r)=>e.check(ce(t,r)),e.nonempty=t=>e.check(ce(1,t)),e.max=(t,r)=>e.check($n(t,r)),e.length=(t,r)=>e.check(On(t,r)),e.unwrap=()=>e.element});function Na(e,n){return Go(Ma,e,n)}const Ca=h("ZodUnion",(e,n)=>{vo.init(e,n),N.init(e,n),e.options=n.options});function za(e,n){return new Ca({type:"union",options:e,...k(n)})}const Pa=h("ZodIntersection",(e,n)=>{_o.init(e,n),N.init(e,n)});function Sa(e,n){return new Pa({type:"intersection",left:e,right:n})}const Ra=h("ZodTransform",(e,n)=>{wo.init(e,n),N.init(e,n),e._zod.parse=(t,r)=>{t.addIssue=a=>{if(typeof a=="string")t.issues.push(W(a,t.value,n));else{const c=a;c.fatal&&(c.continue=!1),c.code??(c.code="custom"),c.input??(c.input=t.value),c.inst??(c.inst=e),c.continue??(c.continue=!0),t.issues.push(W(c))}};const s=n.transform(t.value,t);return s instanceof Promise?s.then(a=>(t.value=a,t)):(t.value=s,t)}});function Ea(e){return new Ra({type:"transform",transform:e})}const Ia=h("ZodOptional",(e,n)=>{jo.init(e,n),N.init(e,n),e.unwrap=()=>e._zod.def.innerType});function wn(e){return new Ia({type:"optional",innerType:e})}const Aa=h("ZodNullable",(e,n)=>{bo.init(e,n),N.init(e,n),e.unwrap=()=>e._zod.def.innerType});function jn(e){return new Aa({type:"nullable",innerType:e})}const Ta=h("ZodDefault",(e,n)=>{ko.init(e,n),N.init(e,n),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Da(e,n){return new Ta({type:"default",innerType:e,get defaultValue(){return typeof n=="function"?n():n}})}const $a=h("ZodPrefault",(e,n)=>{yo.init(e,n),N.init(e,n),e.unwrap=()=>e._zod.def.innerType});function Oa(e,n){return new $a({type:"prefault",innerType:e,get defaultValue(){return typeof n=="function"?n():n}})}const Za=h("ZodNonOptional",(e,n)=>{Mo.init(e,n),N.init(e,n),e.unwrap=()=>e._zod.def.innerType});function La(e,n){return new Za({type:"nonoptional",innerType:e,...k(n)})}const Fa=h("ZodCatch",(e,n)=>{No.init(e,n),N.init(e,n),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function Ua(e,n){return new Fa({type:"catch",innerType:e,catchValue:typeof n=="function"?n:()=>n})}const Ga=h("ZodPipe",(e,n)=>{Co.init(e,n),N.init(e,n),e.in=n.in,e.out=n.out});function bn(e,n){return new Ga({type:"pipe",in:e,out:n})}const Ka=h("ZodReadonly",(e,n)=>{zo.init(e,n),N.init(e,n)});function Ba(e){return new Ka({type:"readonly",innerType:e})}const Va=h("ZodCustom",(e,n)=>{Po.init(e,n),N.init(e,n)});function Wa(e,n){const t=new E({check:"custom",...k(n)});return t._zod.check=e,t}function qa(e,n={}){return Ko(Va,e,n)}function Ha(e,n){const t=Wa(r=>(r.addIssue=s=>{if(typeof s=="string")r.issues.push(W(s,r.value,t._zod.def));else{const a=s;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=r.value),a.inst??(a.inst=t),a.continue??(a.continue=!t._zod.def.abort),r.issues.push(W(a))}},e(r.value,r)),n);return t}const We=Ot(e=>({notifications:[],addNotification:(n,t)=>e(r=>{const s={id:ya(),message:n,type:t,date:Date.now()};return{notifications:[...r.notifications,s]}}),removeNotification:n=>e(t=>({notifications:t.notifications.filter(r=>r.id!==n)})),clearNotifications:()=>e({notifications:[]})}));function Ya(){const{notifications:e,removeNotification:n,clearNotifications:t}=We();return o.jsxs(Ee,{className:"group-data-[collapsible=icon]:hidden",children:[o.jsx(F,{}),o.jsx(F,{className:"text-sidebar-foreground",children:e.length==0?o.jsx("span",{className:"text-gray-500",children:"No new notifications"}):o.jsxs("span",{className:"flex justify-between w-full",children:["Notifications",o.jsx("button",{onClick:t,children:o.jsx(Nr,{className:"text-sidebar-foreground size-4 "})})]})}),o.jsx(Q,{children:e?.map(r=>o.jsx(R,{children:o.jsx(P,{asChild:!0,children:o.jsxs("div",{className:"flex items-center justify-between text-sidebar-foreground",children:[o.jsx(Rn,{className:"w-4 h-4"}),o.jsx("span",{className:"truncate",children:r.message}),o.jsx("button",{onClick:()=>n(r.id),className:"p-1",children:o.jsx(Gr,{className:"w-4 h-4"})})]})})},r.date))})]})}function Xa({setNav:e}){const{notifications:n}=We();return o.jsx("button",{onClick:()=>e("notifications"),className:"place-items-center rounded-2xl size-8  shadow-md transition hover:scale-105 hover:bg-zinc-200 dark:hover:bg-zinc-700",title:"Notifications",children:n.length>0?o.jsx(Rn,{className:"h-5 w-5 text-blue-400"}):o.jsx(En,{className:"h-5 w-5 text-zinc-500 dark:text-zinc-800"})})}function Qa({author:e}){const{isMobile:n}=pe(),t=he();return o.jsxs(R,{children:[o.jsx(P,{asChild:!0,children:o.jsxs("button",{onClick:()=>t("/results/author?authorId="+e.id),children:[o.jsxs(ke,{className:"size-6 rounded-full",children:[o.jsx(ye,{src:"https://cdn.culture.ru/images/becb4d30-310b-5a5b-94be-56e086848ebf",alt:e.username}),o.jsx(Me,{className:"rounded-lg",children:"CN"})]}),o.jsx("span",{children:e.username})]})}),o.jsxs(Ke,{children:[o.jsx(Be,{asChild:!0,children:o.jsxs(Cn,{showOnHover:!0,children:[o.jsx(L,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"More"})]})}),o.jsx(Ve,{className:"w-48 rounded-lg",side:n?"bottom":"right",align:n?"end":"start",children:o.jsxs(I,{children:[o.jsx(An,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{children:"Unsubscribe"})]})})]})]})}function Ja(){const e=he(),{data:n,isLoading:t,error:r}=Zt();return o.jsx(Ee,{className:"group-data-[collapsible=icon]:hidden",children:o.jsxs(Q,{children:[o.jsx(F,{}),o.jsxs(P,{onClick:()=>e("/results/likes"),children:[o.jsx(Sn,{className:"text-sidebar-foreground"}),o.jsx("span",{children:"Favorites"})]}),o.jsxs(P,{onClick:()=>e("/results/search"),children:[o.jsx(Ar,{className:"text-sidebar-foreground"}),o.jsx("span",{children:"Explore"})]}),o.jsx(zn,{}),o.jsx(F,{children:"Your Fav Authors"}),t&&o.jsx(R,{children:o.jsxs(P,{className:"text-muted-foreground",children:[o.jsx(L,{className:"h-4 w-4"}),o.jsx("span",{children:"Loading..."})]})}),r&&o.jsx(R,{children:o.jsxs(P,{className:"text-destructive",children:[o.jsx(In,{className:"h-4 w-4"}),o.jsx("span",{children:r.message})]})}),n&&n.length>0?n.map(s=>o.jsx(Qa,{author:s},s?.id)):o.jsx("p",{className:"text-gray-500 self-center text-sm p-2",children:"No authors found"})]})})}function ec({setNav:e,nav:n}){return o.jsx("button",{onClick:()=>e("posts"),className:"place-items-center rounded-2xl size-8  shadow-md transition hover:scale-105 hover:bg-zinc-200 dark:hover:bg-zinc-700",title:"Posts",children:n==="posts"?o.jsx(sn,{className:"h-5 w-5 text-emerald-600"}):o.jsx(sn,{className:"h-5 w-5 text-zinc-500 dark:text-zinc-800"})})}function nc({...e}){const{open:n}=pe(),t=Vt(),r=Y(l=>l.user),s={name:r?.username??"",email:r?.email??"",avatar:"https://cdn.culture.ru/images/becb4d30-310b-5a5b-94be-56e086848ebf"},[a,c]=i.useState("notifications"),u=Lt();return i.useEffect(()=>{const l=u.pathname.split("/")[1];l=="note"?c("notes"):l=="post"||l=="results"?c("posts"):c("notifications")},[u]),o.jsxs(Wt,{collapsible:"icon",className:"shadow-lg shadow-zinc-900/20 dark:shadow-zinc-100/20 z-40",...e,children:[o.jsxs(qt,{className:"flex gap-2",style:{flexDirection:t||n?"row":"column"},children:[o.jsx(_t,{}),o.jsx(ma,{setNav:c,nav:a}),o.jsx(ec,{setNav:c,nav:a}),o.jsx(Xa,{setNav:c})]}),o.jsx(Ht,{children:a==="notes"?o.jsx(pa,{}):a==="notifications"?o.jsx(Ya,{}):o.jsx(Ja,{})}),o.jsx(Yt,{children:o.jsx(fa,{user:s})})]})}const tc=()=>Re({queryKey:["refresh-token"],queryFn:async()=>await fetch("/api/auth/refresh",{method:"POST",credentials:"include"}).then(async n=>{if(!n.ok)throw console.log("we got error here"),new Error((await n.json()).error??"Failed to refresh token");const t=await n.json();return br.parse(t)}),refetchInterval:14*60*1e3,refetchOnWindowFocus:!1,refetchIntervalInBackground:!0,retry:!1,enabled:!0});function rc(){return o.jsx("header",{className:"sticky top-0 z-50 flex justify-end items-center w-full h-16 bg-background px-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(_t,{}),o.jsx(en,{to:"/login",children:o.jsx(nn,{variant:"default",children:"Sign In"})}),o.jsx(en,{to:"/register",children:o.jsx(nn,{variant:"outline",children:"Register"})})]})})}function jc(){const{clearAuth:e,setToken:n,isAuthenticated:t}=Y(),{data:r,status:s,error:a}=tc(),{addNotification:c}=We();return i.useEffect(()=>{if(s=="error"){console.log(a),e();return}s=="success"&&n(r)},[s,r,n,e,a]),i.useEffect(()=>{c("Welcome to our app","success")},[]),t?o.jsxs(Xt,{children:[o.jsx(nc,{}),o.jsx(Qt,{children:o.jsx(tn,{})})]}):o.jsxs(o.Fragment,{children:[o.jsx(rc,{}),o.jsx(tn,{})]})}export{jc as default};
