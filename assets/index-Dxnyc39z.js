import{j as e,L as f,l as N,r as n,e as k}from"./index-Coke0nAI.js";import{d as z,e as v,c as y,A as P,a as L,b as w}from"./useSocialQuery-CqZYNBv8.js";import{P as g}from"./post-Doj8FOzJ.js";import{L as b}from"./loader-circle-tI8Q5Y-1.js";import A from"./search-D-28eR0f.js";import{H as C}from"./sidebar-BzK-oMkL.js";import{u as S}from"./useAuthStore-C2RerLba.js";import"./index-DzwLIVv3.js";import"./createLucideIcon-CNxtfhBc.js";import"./index-Bp8qc0jA.js";import"./search-input-gWxK8EcM.js";import"./useBaseQuery-CQeARSMF.js";import"./search-CRkxPwhY.js";import"./schemas-DHehp46N.js";import"./useUserStore-D65FoZI4.js";import"./react-qWK4YXkQ.js";function F(){const{data:s,isLoading:r,hasNextPage:i,fetchNextPage:d,isFetchingNextPage:c}=z(),l=s?.pages.flatMap(t=>t.likes)??[],x=l.flatMap(t=>t.note);return r?e.jsx(b,{className:"m-auto"}):e.jsxs("div",{className:"flex flex-col items-center h-full",children:[e.jsxs("div",{className:"fixed text-5xl font-delius-swash-caps top-0 w-[70%] bg-background border-b border-border h-30 flex flex-row justify-center items-center ",children:["Your ",e.jsx("img",{src:"https://mohiramansurovna.github.io/linaform-client/heart.png",alt:"liked",className:"inline size-18"})," posts"]}),e.jsx(g,{posts:x,containerClassName:"flex-1 mt-34 w-[70%] overflow-y-auto"}),l.length===0&&e.jsxs("p",{className:"self-center text-center mt-4 text-muted-foreground",children:["Oops, looks like you haven't liked any post.",e.jsx("br",{}),e.jsx(f,{to:"/results/search",className:"hover:text-primary underline",children:"Try exploring"})]}),i&&e.jsx("button",{onClick:()=>d(),disabled:c,className:"mx-auto my-4 px-4 py-2 rounded bg-primary text-white",children:c?"Loading...":"Load more"})]})}function E(){const[s]=N(),r=s.get("authorId"),{data:i,isLoading:d,hasNextPage:c,fetchNextPage:l,isFetchingNextPage:x}=v(r),{data:t}=y(r),a=n.useMemo(()=>i?.pages.flatMap(u=>u.posts)??[],[i?.pages]),[o,p]=n.useState("recent"),[m,h]=n.useState(a??[]);return n.useEffect(()=>{h(a)},[a]),n.useEffect(()=>{o==="recent"?h(a):o==="popular"&&h([...a].sort((u,j)=>j.likes.length-u.likes.length))},[o,a]),d?e.jsx("div",{className:"flex justify-center py-20",children:e.jsx(b,{className:"animate-spin size-10 text-zinc-500"})}):e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:" bg-background fixed w-[calc(100%-64px)] px-16 h-38 top-0",children:[e.jsxs("div",{className:"flex items-center gap-6 w-full mt-10",children:[e.jsxs(P,{className:"size-20 rounded-full",children:[e.jsx(L,{src:"https://cdn.culture.ru/images/becb4d30-310b-5a5b-94be-56e086848ebf",alt:t?.username}),e.jsx(w,{className:"rounded-lg",children:" CN"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:t?.username}),e.jsxs("div",{className:"flex gap-6 text-zinc-500 text-sm",children:[e.jsxs("span",{children:[e.jsx("strong",{className:"text-zinc-900 dark:text-zinc-100",children:m.length})," Posts"]}),e.jsxs("span",{children:[e.jsx("strong",{className:"text-zinc-900 dark:text-zinc-100",children:t?.followers.length??0})," Subscribers"]})]})]})]}),e.jsxs("nav",{className:"flex justify-center gap-6 border-b border-zinc-200 dark:border-zinc-800 text-sm",children:[e.jsx("button",{onClick:()=>p("recent"),className:`pb-2 transition-colors ${o==="recent"?"border-b-2 border-zinc-900 dark:border-zinc-100 text-zinc-900 dark:text-zinc-100":"text-zinc-500 hover:text-zinc-900 dark:hover:text-zinc-100"}`,children:"Recent"}),e.jsx("button",{onClick:()=>p("popular"),className:`pb-2 transition-colors ${o==="popular"?"border-b-2 border-zinc-900 dark:border-zinc-100 text-zinc-900 dark:text-zinc-100":"text-zinc-500 hover:text-zinc-900 dark:hover:text-zinc-100"}`,children:"Popular"})]})]}),e.jsxs("section",{className:"flex mt-40 flex-col px-16 gap-4",children:[e.jsx(g,{posts:m,containerClassName:"flex-1 overflow-y-auto"}),m.length===0&&e.jsxs("p",{className:"self-center text-center text-zinc-500 py-20",children:["Oops, looks like this author has no posts yet. ",e.jsx("br",{}),e.jsx(f,{to:"/results/search",className:"hover:text-zinc-900 dark:hover:text-zinc-100 underline",children:"Try exploring"})]}),c&&e.jsx("button",{onClick:()=>l(),disabled:x,className:"mx-auto mt-6 text-sm px-4 py-2 border rounded-md text-zinc-600 dark:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition",children:x?"Loading...":"Load more"})]})]})}function V(){const{type:s}=k(),{isAuthenticated:r}=S();return e.jsxs(e.Fragment,{children:[r&&e.jsx(C,{className:"z-60 fixed"}),s==="likes"&&e.jsx(F,{}),s==="author"&&e.jsx(E,{}),s==="search"&&e.jsx(A,{})]})}export{V as default};
