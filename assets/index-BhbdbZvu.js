import{c as b,a as H,e as Re,f as jn,r as i,g as bn,j as o,P as ue,h as Nt,i as F,k as Y,l as x,m as Ct,n as zt,o as Pt,p as St,q as Rt,F as Et,D as It,s as Mn,t as At,v as Je,d as le,b as de,L as be,u as Tt,w as Dt,x as $t,y as Ot,B as en,O as nn}from"./index-BcR0Qb-V.js";import{c as kn,R as Zt,A as Lt,C as Ft,a as Ut,u as pe,S as R,b as P,d as yn,e as X,f as Gt,g as Ee,h as L,i as Nn,j as Kt,k as Bt,l as Vt,m as Wt,n as qt,o as Ht,p as Yt}from"./sidebar-f-M9iu5I.js";import{c as Xt,a as Cn,u as Qt,I as Jt,R as er,b as nr,d as tr,e as rr}from"./useNoteMutations-DoafF0su.js";import{H as zn}from"./heart-D9zvnFcJ.js";import{S as or}from"./search-input-QWI4HMMx.js";import{L as sr}from"./loader-DVeOD6V0.js";import{C as tn}from"./chevrons-right-DyFOx7Bd.js";import{A as Me,a as ke,b as ye}from"./avatar-QBV1Z_Jn.js";import{L as ar}from"./loader-circle-B_WZVwAO.js";import{u as cr}from"./useThemeStore-Cz-gunSI.js";import{b as p,e as Ie,n as Ae,g as Te,d as _,c as Ne,s as ir,f as ur,h as B,i as De,j as Ce,k as ze,l as rn,r as lr,m as dr,o as V,q as M,$ as pr,t as hr,u as mr,_ as fr,v as gr,w as xr,x as vr,y as _r}from"./parse-CqfTvWUt.js";import{B as Pn}from"./bell-ring-89bpptlZ.js";import{A as wr}from"./schemas-BWUwtsDD.js";import"./search-B81CmA2F.js";import"./index-ChiIRkOX.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M15 8h6",key:"8ybuxh"}],["path",{d:"M16.243 3.757A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673A9.4 9.4 0 0 1 18.667 12",key:"bdwj86"}]],br=b("bell-minus",jr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],kr=b("bell",Mr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M16 12h2",key:"7q9ll5"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M6 8h2",key:"30oboj"}]],on=b("book-open-text",yr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]],sn=b("chevrons-left",Nr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],zr=b("chevrons-up-down",Cr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Sn=b("circle-alert",Pr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Rr=b("compass",Sr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Z=b("ellipsis",Er);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=[["path",{d:"m15 17 5-5-5-5",key:"nf172w"}],["path",{d:"M4 18v-2a4 4 0 0 1 4-4h12",key:"jmiej9"}]],Ar=b("forward",Ir);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Dr=b("log-out",Tr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=[["path",{d:"M5 12h14",key:"1ays0h"}]],Or=b("minus",$r);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],Lr=b("moon",Zr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Ur=b("pen",Fr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Kr=b("square-pen",Gr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Vr=b("sun",Br);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Rn=b("trash-2",Wr),an=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,qr=e=>{const n=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${n}$`)},Hr=/^[^A-Z]*$/,Yr=/^[^a-z]*$/,E=p("$ZodCheck",(e,n)=>{var t;e._zod??(e._zod={}),e._zod.def=n,(t=e._zod).onattach??(t.onattach=[])}),Xr=p("$ZodCheckMaxLength",(e,n)=>{E.init(e,n),e._zod.when=t=>{const r=t.value;return!Ae(r)&&r.length!==void 0},e._zod.onattach.push(t=>{const r=t._zod.bag.maximum??Number.POSITIVE_INFINITY;n.maximum<r&&(t._zod.bag.maximum=n.maximum)}),e._zod.check=t=>{const r=t.value;if(r.length<=n.maximum)return;const a=Te(r);t.issues.push({origin:a,code:"too_big",maximum:n.maximum,inclusive:!0,input:r,inst:e,continue:!n.abort})}}),Qr=p("$ZodCheckMinLength",(e,n)=>{E.init(e,n),e._zod.when=t=>{const r=t.value;return!Ae(r)&&r.length!==void 0},e._zod.onattach.push(t=>{const r=t._zod.bag.minimum??Number.NEGATIVE_INFINITY;n.minimum>r&&(t._zod.bag.minimum=n.minimum)}),e._zod.check=t=>{const r=t.value;if(r.length>=n.minimum)return;const a=Te(r);t.issues.push({origin:a,code:"too_small",minimum:n.minimum,inclusive:!0,input:r,inst:e,continue:!n.abort})}}),Jr=p("$ZodCheckLengthEquals",(e,n)=>{E.init(e,n),e._zod.when=t=>{const r=t.value;return!Ae(r)&&r.length!==void 0},e._zod.onattach.push(t=>{const r=t._zod.bag;r.minimum=n.length,r.maximum=n.length,r.length=n.length}),e._zod.check=t=>{const r=t.value,s=r.length;if(s===n.length)return;const a=Te(r),c=s>n.length;t.issues.push({origin:a,...c?{code:"too_big",maximum:n.length}:{code:"too_small",minimum:n.length},input:t.value,inst:e,continue:!n.abort})}}),he=p("$ZodCheckStringFormat",(e,n)=>{var t;E.init(e,n),e._zod.onattach.push(r=>{const s=r._zod.bag;s.format=n.format,n.pattern&&(s.patterns??(s.patterns=new Set),s.patterns.add(n.pattern))}),(t=e._zod).check??(t.check=r=>{if(!n.pattern)throw new Error("Not implemented.");n.pattern.lastIndex=0,!n.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:n.format,input:r.value,...n.pattern?{pattern:n.pattern.toString()}:{},inst:e,continue:!n.abort})})}),eo=p("$ZodCheckRegex",(e,n)=>{he.init(e,n),e._zod.check=t=>{n.pattern.lastIndex=0,!n.pattern.test(t.value)&&t.issues.push({origin:"string",code:"invalid_format",format:"regex",input:t.value,pattern:n.pattern.toString(),inst:e,continue:!n.abort})}}),no=p("$ZodCheckLowerCase",(e,n)=>{n.pattern??(n.pattern=Hr),he.init(e,n)}),to=p("$ZodCheckUpperCase",(e,n)=>{n.pattern??(n.pattern=Yr),he.init(e,n)}),ro=p("$ZodCheckIncludes",(e,n)=>{E.init(e,n);const t=Ie(n.includes),r=new RegExp(typeof n.position=="number"?`^.{${n.position}}${t}`:t);n.pattern=r,e._zod.onattach.push(s=>{const a=s._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),e._zod.check=s=>{s.value.includes(n.includes,n.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:n.includes,input:s.value,inst:e,continue:!n.abort})}}),oo=p("$ZodCheckStartsWith",(e,n)=>{E.init(e,n);const t=new RegExp(`^${Ie(n.prefix)}.*`);n.pattern??(n.pattern=t),e._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(t)}),e._zod.check=r=>{r.value.startsWith(n.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:n.prefix,input:r.value,inst:e,continue:!n.abort})}}),so=p("$ZodCheckEndsWith",(e,n)=>{E.init(e,n);const t=new RegExp(`.*${Ie(n.suffix)}$`);n.pattern??(n.pattern=t),e._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(t)}),e._zod.check=r=>{r.value.endsWith(n.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:n.suffix,input:r.value,inst:e,continue:!n.abort})}}),ao=p("$ZodCheckOverwrite",(e,n)=>{E.init(e,n),e._zod.check=t=>{t.value=n.tx(t.value)}}),co={major:4,minor:0,patch:0},k=p("$ZodType",(e,n)=>{var t;e??(e={}),_(e._zod,"id",()=>n.type+"_"+lr(10)),e._zod.def=n,e._zod.bag=e._zod.bag||{},e._zod.version=co;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const s of r)for(const a of s._zod.onattach)a(e);if(r.length===0)(t=e._zod).deferred??(t.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const s=(a,c,u)=>{let d=B(a),m;for(const h of c){if(h._zod.when){if(!h._zod.when(a))continue}else if(d)continue;const l=a.issues.length,g=h._zod.check(a);if(g instanceof Promise&&u?.async===!1)throw new Ne;if(m||g instanceof Promise)m=(m??Promise.resolve()).then(async()=>{await g,a.issues.length!==l&&(d||(d=B(a,l)))});else{if(a.issues.length===l)continue;d||(d=B(a,l))}}return m?m.then(()=>a):a};e._zod.run=(a,c)=>{const u=e._zod.parse(a,c);if(u instanceof Promise){if(c.async===!1)throw new Ne;return u.then(d=>s(d,r,c))}return s(u,r,c)}}e["~standard"]={validate:s=>{try{const a=ir(e,s);return a.success?{value:a.data}:{issues:a.error?.issues}}catch{return ur(e,s).then(c=>c.success?{value:c.data}:{issues:c.error?.issues})}},vendor:"zod",version:1}}),En=p("$ZodString",(e,n)=>{k.init(e,n),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??qr(e._zod.bag),e._zod.parse=(t,r)=>{if(n.coerce)try{t.value=String(t.value)}catch{}return typeof t.value=="string"||t.issues.push({expected:"string",code:"invalid_type",input:t.value,inst:e}),t}}),In=p("$ZodStringFormat",(e,n)=>{he.init(e,n),En.init(e,n)}),io=p("$ZodUUID",(e,n)=>{if(n.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[n.version];if(r===void 0)throw new Error(`Invalid UUID version: "${n.version}"`);n.pattern??(n.pattern=an(r))}else n.pattern??(n.pattern=an());In.init(e,n)});function cn(e,n,t){e.issues.length&&n.issues.push(...dr(t,e.issues)),n.value[t]=e.value}const uo=p("$ZodArray",(e,n)=>{k.init(e,n),e._zod.parse=(t,r)=>{const s=t.value;if(!Array.isArray(s))return t.issues.push({expected:"array",code:"invalid_type",input:s,inst:e}),t;t.value=Array(s.length);const a=[];for(let c=0;c<s.length;c++){const u=s[c],d=n.element._zod.run({value:u,issues:[]},r);d instanceof Promise?a.push(d.then(m=>cn(m,t,c))):cn(d,t,c)}return a.length?Promise.all(a).then(()=>t):t}});function un(e,n,t,r){for(const s of e)if(s.issues.length===0)return n.value=s.value,n;return n.issues.push({code:"invalid_union",input:n.value,inst:t,errors:e.map(s=>s.issues.map(a=>Ce(a,r,ze())))}),n}const lo=p("$ZodUnion",(e,n)=>{k.init(e,n),_(e._zod,"values",()=>{if(n.options.every(t=>t._zod.values))return new Set(n.options.flatMap(t=>Array.from(t._zod.values)))}),_(e._zod,"pattern",()=>{if(n.options.every(t=>t._zod.pattern)){const t=n.options.map(r=>r._zod.pattern);return new RegExp(`^(${t.map(r=>De(r.source)).join("|")})$`)}}),e._zod.parse=(t,r)=>{let s=!1;const a=[];for(const c of n.options){const u=c._zod.run({value:t.value,issues:[]},r);if(u instanceof Promise)a.push(u),s=!0;else{if(u.issues.length===0)return u;a.push(u)}}return s?Promise.all(a).then(c=>un(c,t,e,r)):un(a,t,e,r)}}),po=p("$ZodIntersection",(e,n)=>{k.init(e,n),e._zod.parse=(t,r)=>{const{value:s}=t,a=n.left._zod.run({value:s,issues:[]},r),c=n.right._zod.run({value:s,issues:[]},r);return a instanceof Promise||c instanceof Promise?Promise.all([a,c]).then(([d,m])=>ln(t,d,m)):ln(t,a,c)}});function Pe(e,n){if(e===n)return{valid:!0,data:e};if(e instanceof Date&&n instanceof Date&&+e==+n)return{valid:!0,data:e};if(rn(e)&&rn(n)){const t=Object.keys(n),r=Object.keys(e).filter(a=>t.indexOf(a)!==-1),s={...e,...n};for(const a of r){const c=Pe(e[a],n[a]);if(!c.valid)return{valid:!1,mergeErrorPath:[a,...c.mergeErrorPath]};s[a]=c.data}return{valid:!0,data:s}}if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return{valid:!1,mergeErrorPath:[]};const t=[];for(let r=0;r<e.length;r++){const s=e[r],a=n[r],c=Pe(s,a);if(!c.valid)return{valid:!1,mergeErrorPath:[r,...c.mergeErrorPath]};t.push(c.data)}return{valid:!0,data:t}}return{valid:!1,mergeErrorPath:[]}}function ln(e,n,t){if(n.issues.length&&e.issues.push(...n.issues),t.issues.length&&e.issues.push(...t.issues),B(e))return e;const r=Pe(n.value,t.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}const ho=p("$ZodTransform",(e,n)=>{k.init(e,n),e._zod.parse=(t,r)=>{const s=n.transform(t.value,t);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(c=>(t.value=c,t));if(s instanceof Promise)throw new Ne;return t.value=s,t}}),mo=p("$ZodOptional",(e,n)=>{k.init(e,n),e._zod.optin="optional",e._zod.optout="optional",_(e._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,void 0]):void 0),_(e._zod,"pattern",()=>{const t=n.innerType._zod.pattern;return t?new RegExp(`^(${De(t.source)})?$`):void 0}),e._zod.parse=(t,r)=>t.value===void 0?t:n.innerType._zod.run(t,r)}),fo=p("$ZodNullable",(e,n)=>{k.init(e,n),_(e._zod,"optin",()=>n.innerType._zod.optin),_(e._zod,"optout",()=>n.innerType._zod.optout),_(e._zod,"pattern",()=>{const t=n.innerType._zod.pattern;return t?new RegExp(`^(${De(t.source)}|null)$`):void 0}),_(e._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,null]):void 0),e._zod.parse=(t,r)=>t.value===null?t:n.innerType._zod.run(t,r)}),go=p("$ZodDefault",(e,n)=>{k.init(e,n),e._zod.optin="optional",_(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(t,r)=>{if(t.value===void 0)return t.value=n.defaultValue,t;const s=n.innerType._zod.run(t,r);return s instanceof Promise?s.then(a=>dn(a,n)):dn(s,n)}});function dn(e,n){return e.value===void 0&&(e.value=n.defaultValue),e}const xo=p("$ZodPrefault",(e,n)=>{k.init(e,n),e._zod.optin="optional",_(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(t,r)=>(t.value===void 0&&(t.value=n.defaultValue),n.innerType._zod.run(t,r))}),vo=p("$ZodNonOptional",(e,n)=>{k.init(e,n),_(e._zod,"values",()=>{const t=n.innerType._zod.values;return t?new Set([...t].filter(r=>r!==void 0)):void 0}),e._zod.parse=(t,r)=>{const s=n.innerType._zod.run(t,r);return s instanceof Promise?s.then(a=>pn(a,e)):pn(s,e)}});function pn(e,n){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:n}),e}const _o=p("$ZodCatch",(e,n)=>{k.init(e,n),_(e._zod,"optin",()=>n.innerType._zod.optin),_(e._zod,"optout",()=>n.innerType._zod.optout),_(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(t,r)=>{const s=n.innerType._zod.run(t,r);return s instanceof Promise?s.then(a=>(t.value=a.value,a.issues.length&&(t.value=n.catchValue({...t,error:{issues:a.issues.map(c=>Ce(c,r,ze()))},input:t.value}),t.issues=[]),t)):(t.value=s.value,s.issues.length&&(t.value=n.catchValue({...t,error:{issues:s.issues.map(a=>Ce(a,r,ze()))},input:t.value}),t.issues=[]),t)}}),wo=p("$ZodPipe",(e,n)=>{k.init(e,n),_(e._zod,"values",()=>n.in._zod.values),_(e._zod,"optin",()=>n.in._zod.optin),_(e._zod,"optout",()=>n.out._zod.optout),e._zod.parse=(t,r)=>{const s=n.in._zod.run(t,r);return s instanceof Promise?s.then(a=>hn(a,n,r)):hn(s,n,r)}});function hn(e,n,t){return B(e)?e:n.out._zod.run({value:e.value,issues:e.issues},t)}const jo=p("$ZodReadonly",(e,n)=>{k.init(e,n),_(e._zod,"propValues",()=>n.innerType._zod.propValues),_(e._zod,"optin",()=>n.innerType._zod.optin),_(e._zod,"optout",()=>n.innerType._zod.optout),e._zod.parse=(t,r)=>{const s=n.innerType._zod.run(t,r);return s instanceof Promise?s.then(mn):mn(s)}});function mn(e){return e.value=Object.freeze(e.value),e}const bo=p("$ZodCustom",(e,n)=>{E.init(e,n),k.init(e,n),e._zod.parse=(t,r)=>t,e._zod.check=t=>{const r=t.value,s=n.fn(r);if(s instanceof Promise)return s.then(a=>fn(a,t,r,e));fn(s,t,r,e)}});function fn(e,n,t,r){if(!e){const s={code:"custom",input:t,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(s.params=r._zod.def.params),n.issues.push(V(s))}}class Mo{constructor(){this._map=new WeakMap,this._idmap=new Map}add(n,...t){const r=t[0];if(this._map.set(n,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,n)}return this}remove(n){return this._map.delete(n),this}get(n){const t=n._zod.parent;if(t){const r={...this.get(t)??{}};return delete r.id,{...r,...this._map.get(n)}}return this._map.get(n)}has(n){return this._map.has(n)}}function ko(){return new Mo}const oe=ko();function yo(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...M(n)})}function An(e,n){return new Xr({check:"max_length",...M(n),maximum:e})}function se(e,n){return new Qr({check:"min_length",...M(n),minimum:e})}function Tn(e,n){return new Jr({check:"length_equals",...M(n),length:e})}function No(e,n){return new eo({check:"string_format",format:"regex",...M(n),pattern:e})}function Co(e){return new no({check:"string_format",format:"lowercase",...M(e)})}function zo(e){return new to({check:"string_format",format:"uppercase",...M(e)})}function Po(e,n){return new ro({check:"string_format",format:"includes",...M(n),includes:e})}function So(e,n){return new oo({check:"string_format",format:"starts_with",...M(n),prefix:e})}function Ro(e,n){return new so({check:"string_format",format:"ends_with",...M(n),suffix:e})}function Q(e){return new ao({check:"overwrite",tx:e})}function Eo(e){return Q(n=>n.normalize(e))}function Io(){return Q(e=>e.trim())}function Ao(){return Q(e=>e.toLowerCase())}function To(){return Q(e=>e.toUpperCase())}function Do(e,n,t){return new e({type:"array",element:n,...M(t)})}function $o(e,n,t){return new e({type:"custom",check:"custom",fn:n,...M(t)})}const Dn="https://linaform-server.onrender.com",Oo=(e,n=7)=>{const{accessToken:t}=H();return Re({queryKey:["notes",e],queryFn:async()=>{const r=await fetch(Dn+`/api/note?page=${e}&limit=${n}`,{headers:{Authorization:`Bearer ${t}`}});if(!r.ok)throw new Error("Failed to fetch notes");return r.json()}})},Zo=(e,n,t=7)=>{const{accessToken:r}=H();return Re({queryKey:["notesSearch",e,n],queryFn:async()=>await fetch(Dn+`/api/note/search?term=${e}&page=${n}&limit=${t}`,{headers:{Authorization:`Bearer ${r}`}}).then(async s=>{if(s.status===404)return[];if(!s.ok)throw new Error((await s.json()).error);return s.json()}),enabled:!!e})};var Se=["Enter"," "],Lo=["ArrowDown","PageUp","Home"],$n=["ArrowUp","PageDown","End"],Fo=[...Lo,...$n],Uo={ltr:[...Se,"ArrowRight"],rtl:[...Se,"ArrowLeft"]},Go={ltr:["ArrowLeft"],rtl:["ArrowRight"]},J="Menu",[W,Ko,Bo]=Xt(J),[A,On]=jn(J,[Bo,kn,Cn]),me=kn(),Zn=Cn(),[Vo,T]=A(J),[Wo,ee]=A(J),Ln=e=>{const{__scopeMenu:n,open:t=!1,children:r,dir:s,onOpenChange:a,modal:c=!0}=e,u=me(n),[d,m]=i.useState(null),h=i.useRef(!1),l=bn(a),g=Qt(s);return i.useEffect(()=>{const j=()=>{h.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>h.current=!1;return document.addEventListener("keydown",j,{capture:!0}),()=>{document.removeEventListener("keydown",j,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),o.jsx(Zt,{...u,children:o.jsx(Vo,{scope:n,open:t,onOpenChange:l,content:d,onContentChange:m,children:o.jsx(Wo,{scope:n,onClose:i.useCallback(()=>l(!1),[l]),isUsingKeyboardRef:h,dir:g,modal:c,children:r})})})};Ln.displayName=J;var qo="MenuAnchor",$e=i.forwardRef((e,n)=>{const{__scopeMenu:t,...r}=e,s=me(t);return o.jsx(Lt,{...s,...r,ref:n})});$e.displayName=qo;var Oe="MenuPortal",[Ho,Fn]=A(Oe,{forceMount:void 0}),Un=e=>{const{__scopeMenu:n,forceMount:t,children:r,container:s}=e,a=T(Oe,n);return o.jsx(Ho,{scope:n,forceMount:t,children:o.jsx(ue,{present:t||a.open,children:o.jsx(Nt,{asChild:!0,container:s,children:r})})})};Un.displayName=Oe;var z="MenuContent",[Yo,Ze]=A(z),Gn=i.forwardRef((e,n)=>{const t=Fn(z,e.__scopeMenu),{forceMount:r=t.forceMount,...s}=e,a=T(z,e.__scopeMenu),c=ee(z,e.__scopeMenu);return o.jsx(W.Provider,{scope:e.__scopeMenu,children:o.jsx(ue,{present:r||a.open,children:o.jsx(W.Slot,{scope:e.__scopeMenu,children:c.modal?o.jsx(Xo,{...s,ref:n}):o.jsx(Qo,{...s,ref:n})})})})}),Xo=i.forwardRef((e,n)=>{const t=T(z,e.__scopeMenu),r=i.useRef(null),s=Y(n,r);return i.useEffect(()=>{const a=r.current;if(a)return Ct(a)},[]),o.jsx(Le,{...e,ref:s,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:x(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),Qo=i.forwardRef((e,n)=>{const t=T(z,e.__scopeMenu);return o.jsx(Le,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),Jo=Rt("MenuContent.ScrollLock"),Le=i.forwardRef((e,n)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:c,disableOutsidePointerEvents:u,onEntryFocus:d,onEscapeKeyDown:m,onPointerDownOutside:h,onFocusOutside:l,onInteractOutside:g,onDismiss:j,disableOutsideScroll:v,...S}=e,w=T(z,t),D=ee(z,t),vt=me(t),_t=Zn(t),qe=Ko(t),[wt,He]=i.useState(null),ne=i.useRef(null),jt=Y(n,ne,w.onContentChange),te=i.useRef(0),re=i.useRef(""),bt=i.useRef(0),ve=i.useRef(null),Ye=i.useRef("right"),_e=i.useRef(0),Mt=v?St:i.Fragment,kt=v?{as:Jo,allowPinchZoom:!0}:void 0,yt=f=>{const O=re.current+f,I=qe().filter(C=>!C.disabled),U=document.activeElement,we=I.find(C=>C.ref.current===U)?.textValue,je=I.map(C=>C.textValue),Xe=ds(je,O,we),G=I.find(C=>C.textValue===Xe)?.ref.current;(function C(Qe){re.current=Qe,window.clearTimeout(te.current),Qe!==""&&(te.current=window.setTimeout(()=>C(""),1e3))})(O),G&&setTimeout(()=>G.focus())};i.useEffect(()=>()=>window.clearTimeout(te.current),[]),Pt();const $=i.useCallback(f=>Ye.current===ve.current?.side&&hs(f,ve.current?.area),[]);return o.jsx(Yo,{scope:t,searchRef:re,onItemEnter:i.useCallback(f=>{$(f)&&f.preventDefault()},[$]),onItemLeave:i.useCallback(f=>{$(f)||(ne.current?.focus(),He(null))},[$]),onTriggerLeave:i.useCallback(f=>{$(f)&&f.preventDefault()},[$]),pointerGraceTimerRef:bt,onPointerGraceIntentChange:i.useCallback(f=>{ve.current=f},[]),children:o.jsx(Mt,{...kt,children:o.jsx(Et,{asChild:!0,trapped:s,onMountAutoFocus:x(a,f=>{f.preventDefault(),ne.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:c,children:o.jsx(It,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:m,onPointerDownOutside:h,onFocusOutside:l,onInteractOutside:g,onDismiss:j,children:o.jsx(er,{asChild:!0,..._t,dir:D.dir,orientation:"vertical",loop:r,currentTabStopId:wt,onCurrentTabStopIdChange:He,onEntryFocus:x(d,f=>{D.isUsingKeyboardRef.current||f.preventDefault()}),preventScrollOnEntryFocus:!0,children:o.jsx(Ft,{role:"menu","aria-orientation":"vertical","data-state":st(w.open),"data-radix-menu-content":"",dir:D.dir,...vt,...S,ref:jt,style:{outline:"none",...S.style},onKeyDown:x(S.onKeyDown,f=>{const I=f.target.closest("[data-radix-menu-content]")===f.currentTarget,U=f.ctrlKey||f.altKey||f.metaKey,we=f.key.length===1;I&&(f.key==="Tab"&&f.preventDefault(),!U&&we&&yt(f.key));const je=ne.current;if(f.target!==je||!Fo.includes(f.key))return;f.preventDefault();const G=qe().filter(C=>!C.disabled).map(C=>C.ref.current);$n.includes(f.key)&&G.reverse(),us(G)}),onBlur:x(e.onBlur,f=>{f.currentTarget.contains(f.target)||(window.clearTimeout(te.current),re.current="")}),onPointerMove:x(e.onPointerMove,q(f=>{const O=f.target,I=_e.current!==f.clientX;if(f.currentTarget.contains(O)&&I){const U=f.clientX>_e.current?"right":"left";Ye.current=U,_e.current=f.clientX}}))})})})})})})});Gn.displayName=z;var es="MenuGroup",Fe=i.forwardRef((e,n)=>{const{__scopeMenu:t,...r}=e;return o.jsx(F.div,{role:"group",...r,ref:n})});Fe.displayName=es;var ns="MenuLabel",Kn=i.forwardRef((e,n)=>{const{__scopeMenu:t,...r}=e;return o.jsx(F.div,{...r,ref:n})});Kn.displayName=ns;var ae="MenuItem",gn="menu.itemSelect",fe=i.forwardRef((e,n)=>{const{disabled:t=!1,onSelect:r,...s}=e,a=i.useRef(null),c=ee(ae,e.__scopeMenu),u=Ze(ae,e.__scopeMenu),d=Y(n,a),m=i.useRef(!1),h=()=>{const l=a.current;if(!t&&l){const g=new CustomEvent(gn,{bubbles:!0,cancelable:!0});l.addEventListener(gn,j=>r?.(j),{once:!0}),zt(l,g),g.defaultPrevented?m.current=!1:c.onClose()}};return o.jsx(Bn,{...s,ref:d,disabled:t,onClick:x(e.onClick,h),onPointerDown:l=>{e.onPointerDown?.(l),m.current=!0},onPointerUp:x(e.onPointerUp,l=>{m.current||l.currentTarget?.click()}),onKeyDown:x(e.onKeyDown,l=>{const g=u.searchRef.current!=="";t||g&&l.key===" "||Se.includes(l.key)&&(l.currentTarget.click(),l.preventDefault())})})});fe.displayName=ae;var Bn=i.forwardRef((e,n)=>{const{__scopeMenu:t,disabled:r=!1,textValue:s,...a}=e,c=Ze(ae,t),u=Zn(t),d=i.useRef(null),m=Y(n,d),[h,l]=i.useState(!1),[g,j]=i.useState("");return i.useEffect(()=>{const v=d.current;v&&j((v.textContent??"").trim())},[a.children]),o.jsx(W.ItemSlot,{scope:t,disabled:r,textValue:s??g,children:o.jsx(Jt,{asChild:!0,...u,focusable:!r,children:o.jsx(F.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:m,onPointerMove:x(e.onPointerMove,q(v=>{r?c.onItemLeave(v):(c.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:x(e.onPointerLeave,q(v=>c.onItemLeave(v))),onFocus:x(e.onFocus,()=>l(!0)),onBlur:x(e.onBlur,()=>l(!1))})})})}),ts="MenuCheckboxItem",Vn=i.forwardRef((e,n)=>{const{checked:t=!1,onCheckedChange:r,...s}=e;return o.jsx(Xn,{scope:e.__scopeMenu,checked:t,children:o.jsx(fe,{role:"menuitemcheckbox","aria-checked":ce(t)?"mixed":t,...s,ref:n,"data-state":Ge(t),onSelect:x(s.onSelect,()=>r?.(ce(t)?!0:!t),{checkForDefaultPrevented:!1})})})});Vn.displayName=ts;var Wn="MenuRadioGroup",[rs,os]=A(Wn,{value:void 0,onValueChange:()=>{}}),qn=i.forwardRef((e,n)=>{const{value:t,onValueChange:r,...s}=e,a=bn(r);return o.jsx(rs,{scope:e.__scopeMenu,value:t,onValueChange:a,children:o.jsx(Fe,{...s,ref:n})})});qn.displayName=Wn;var Hn="MenuRadioItem",Yn=i.forwardRef((e,n)=>{const{value:t,...r}=e,s=os(Hn,e.__scopeMenu),a=t===s.value;return o.jsx(Xn,{scope:e.__scopeMenu,checked:a,children:o.jsx(fe,{role:"menuitemradio","aria-checked":a,...r,ref:n,"data-state":Ge(a),onSelect:x(r.onSelect,()=>s.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});Yn.displayName=Hn;var Ue="MenuItemIndicator",[Xn,ss]=A(Ue,{checked:!1}),Qn=i.forwardRef((e,n)=>{const{__scopeMenu:t,forceMount:r,...s}=e,a=ss(Ue,t);return o.jsx(ue,{present:r||ce(a.checked)||a.checked===!0,children:o.jsx(F.span,{...s,ref:n,"data-state":Ge(a.checked)})})});Qn.displayName=Ue;var as="MenuSeparator",Jn=i.forwardRef((e,n)=>{const{__scopeMenu:t,...r}=e;return o.jsx(F.div,{role:"separator","aria-orientation":"horizontal",...r,ref:n})});Jn.displayName=as;var cs="MenuArrow",et=i.forwardRef((e,n)=>{const{__scopeMenu:t,...r}=e,s=me(t);return o.jsx(Ut,{...s,...r,ref:n})});et.displayName=cs;var is="MenuSub",[fc,nt]=A(is),K="MenuSubTrigger",tt=i.forwardRef((e,n)=>{const t=T(K,e.__scopeMenu),r=ee(K,e.__scopeMenu),s=nt(K,e.__scopeMenu),a=Ze(K,e.__scopeMenu),c=i.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:d}=a,m={__scopeMenu:e.__scopeMenu},h=i.useCallback(()=>{c.current&&window.clearTimeout(c.current),c.current=null},[]);return i.useEffect(()=>h,[h]),i.useEffect(()=>{const l=u.current;return()=>{window.clearTimeout(l),d(null)}},[u,d]),o.jsx($e,{asChild:!0,...m,children:o.jsx(Bn,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":s.contentId,"data-state":st(t.open),...e,ref:Mn(n,s.onTriggerChange),onClick:l=>{e.onClick?.(l),!(e.disabled||l.defaultPrevented)&&(l.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:x(e.onPointerMove,q(l=>{a.onItemEnter(l),!l.defaultPrevented&&!e.disabled&&!t.open&&!c.current&&(a.onPointerGraceIntentChange(null),c.current=window.setTimeout(()=>{t.onOpenChange(!0),h()},100))})),onPointerLeave:x(e.onPointerLeave,q(l=>{h();const g=t.content?.getBoundingClientRect();if(g){const j=t.content?.dataset.side,v=j==="right",S=v?-5:5,w=g[v?"left":"right"],D=g[v?"right":"left"];a.onPointerGraceIntentChange({area:[{x:l.clientX+S,y:l.clientY},{x:w,y:g.top},{x:D,y:g.top},{x:D,y:g.bottom},{x:w,y:g.bottom}],side:j}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(l),l.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:x(e.onKeyDown,l=>{const g=a.searchRef.current!=="";e.disabled||g&&l.key===" "||Uo[r.dir].includes(l.key)&&(t.onOpenChange(!0),t.content?.focus(),l.preventDefault())})})})});tt.displayName=K;var rt="MenuSubContent",ot=i.forwardRef((e,n)=>{const t=Fn(z,e.__scopeMenu),{forceMount:r=t.forceMount,...s}=e,a=T(z,e.__scopeMenu),c=ee(z,e.__scopeMenu),u=nt(rt,e.__scopeMenu),d=i.useRef(null),m=Y(n,d);return o.jsx(W.Provider,{scope:e.__scopeMenu,children:o.jsx(ue,{present:r||a.open,children:o.jsx(W.Slot,{scope:e.__scopeMenu,children:o.jsx(Le,{id:u.contentId,"aria-labelledby":u.triggerId,...s,ref:m,align:"start",side:c.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{c.isUsingKeyboardRef.current&&d.current?.focus(),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:x(e.onFocusOutside,h=>{h.target!==u.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:x(e.onEscapeKeyDown,h=>{c.onClose(),h.preventDefault()}),onKeyDown:x(e.onKeyDown,h=>{const l=h.currentTarget.contains(h.target),g=Go[c.dir].includes(h.key);l&&g&&(a.onOpenChange(!1),u.trigger?.focus(),h.preventDefault())})})})})})});ot.displayName=rt;function st(e){return e?"open":"closed"}function ce(e){return e==="indeterminate"}function Ge(e){return ce(e)?"indeterminate":e?"checked":"unchecked"}function us(e){const n=document.activeElement;for(const t of e)if(t===n||(t.focus(),document.activeElement!==n))return}function ls(e,n){return e.map((t,r)=>e[(n+r)%e.length])}function ds(e,n,t){const s=n.length>1&&Array.from(n).every(m=>m===n[0])?n[0]:n,a=t?e.indexOf(t):-1;let c=ls(e,Math.max(a,0));s.length===1&&(c=c.filter(m=>m!==t));const d=c.find(m=>m.toLowerCase().startsWith(s.toLowerCase()));return d!==t?d:void 0}function ps(e,n){const{x:t,y:r}=e;let s=!1;for(let a=0,c=n.length-1;a<n.length;c=a++){const u=n[a],d=n[c],m=u.x,h=u.y,l=d.x,g=d.y;h>r!=g>r&&t<(l-m)*(r-h)/(g-h)+m&&(s=!s)}return s}function hs(e,n){if(!n)return!1;const t={x:e.clientX,y:e.clientY};return ps(t,n)}function q(e){return n=>n.pointerType==="mouse"?e(n):void 0}var ms=Ln,fs=$e,gs=Un,xs=Gn,vs=Fe,_s=Kn,ws=fe,js=Vn,bs=qn,Ms=Yn,ks=Qn,ys=Jn,Ns=et,Cs=tt,zs=ot,ge="DropdownMenu",[Ps,gc]=jn(ge,[On]),y=On(),[Ss,at]=Ps(ge),ct=e=>{const{__scopeDropdownMenu:n,children:t,dir:r,open:s,defaultOpen:a,onOpenChange:c,modal:u=!0}=e,d=y(n),m=i.useRef(null),[h,l]=At({prop:s,defaultProp:a??!1,onChange:c,caller:ge});return o.jsx(Ss,{scope:n,triggerId:Je(),triggerRef:m,contentId:Je(),open:h,onOpenChange:l,onOpenToggle:i.useCallback(()=>l(g=>!g),[l]),modal:u,children:o.jsx(ms,{...d,open:h,onOpenChange:l,dir:r,modal:u,children:t})})};ct.displayName=ge;var it="DropdownMenuTrigger",ut=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...s}=e,a=at(it,t),c=y(t);return o.jsx(fs,{asChild:!0,...c,children:o.jsx(F.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Mn(n,a.triggerRef),onPointerDown:x(e.onPointerDown,u=>{!r&&u.button===0&&u.ctrlKey===!1&&(a.onOpenToggle(),a.open||u.preventDefault())}),onKeyDown:x(e.onKeyDown,u=>{r||(["Enter"," "].includes(u.key)&&a.onOpenToggle(),u.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})})})});ut.displayName=it;var Rs="DropdownMenuPortal",lt=e=>{const{__scopeDropdownMenu:n,...t}=e,r=y(n);return o.jsx(gs,{...r,...t})};lt.displayName=Rs;var dt="DropdownMenuContent",pt=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=at(dt,t),a=y(t),c=i.useRef(!1);return o.jsx(xs,{id:s.contentId,"aria-labelledby":s.triggerId,...a,...r,ref:n,onCloseAutoFocus:x(e.onCloseAutoFocus,u=>{c.current||s.triggerRef.current?.focus(),c.current=!1,u.preventDefault()}),onInteractOutside:x(e.onInteractOutside,u=>{const d=u.detail.originalEvent,m=d.button===0&&d.ctrlKey===!0,h=d.button===2||m;(!s.modal||h)&&(c.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});pt.displayName=dt;var Es="DropdownMenuGroup",Is=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=y(t);return o.jsx(vs,{...s,...r,ref:n})});Is.displayName=Es;var As="DropdownMenuLabel",ht=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=y(t);return o.jsx(_s,{...s,...r,ref:n})});ht.displayName=As;var Ts="DropdownMenuItem",mt=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=y(t);return o.jsx(ws,{...s,...r,ref:n})});mt.displayName=Ts;var Ds="DropdownMenuCheckboxItem",$s=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=y(t);return o.jsx(js,{...s,...r,ref:n})});$s.displayName=Ds;var Os="DropdownMenuRadioGroup",Zs=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=y(t);return o.jsx(bs,{...s,...r,ref:n})});Zs.displayName=Os;var Ls="DropdownMenuRadioItem",Fs=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=y(t);return o.jsx(Ms,{...s,...r,ref:n})});Fs.displayName=Ls;var Us="DropdownMenuItemIndicator",Gs=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=y(t);return o.jsx(ks,{...s,...r,ref:n})});Gs.displayName=Us;var Ks="DropdownMenuSeparator",ft=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=y(t);return o.jsx(ys,{...s,...r,ref:n})});ft.displayName=Ks;var Bs="DropdownMenuArrow",Vs=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=y(t);return o.jsx(Ns,{...s,...r,ref:n})});Vs.displayName=Bs;var Ws="DropdownMenuSubTrigger",qs=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=y(t);return o.jsx(Cs,{...s,...r,ref:n})});qs.displayName=Ws;var Hs="DropdownMenuSubContent",Ys=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=y(t);return o.jsx(zs,{...s,...r,ref:n,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Ys.displayName=Hs;var Xs=ct,Qs=ut,Js=lt,ea=pt,na=ht,ta=mt,ra=ft;function Ke({...e}){return o.jsx(Xs,{"data-slot":"dropdown-menu",...e})}function Be({...e}){return o.jsx(Qs,{"data-slot":"dropdown-menu-trigger",...e})}function Ve({className:e,sideOffset:n=4,...t}){return o.jsx(Js,{children:o.jsx(ea,{"data-slot":"dropdown-menu-content",sideOffset:n,className:le("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...t})})}function ie({className:e,inset:n,variant:t="default",...r}){return o.jsx(ta,{"data-slot":"dropdown-menu-item","data-inset":n,"data-variant":t,className:le("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function oa({className:e,inset:n,...t}){return o.jsx(na,{"data-slot":"dropdown-menu-label","data-inset":n,className:le("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",e),...t})}function gt({className:e,...n}){return o.jsx(ra,{"data-slot":"dropdown-menu-separator",className:le("bg-border -mx-1 my-1 h-px",e),...n})}function xn({note:e}){const{isMobile:n}=pe(),{setSelectedNoteId:t}=nr(),r=de(),s=tr(),a=c=>{t(c),r("/note")};return o.jsxs(R,{children:[o.jsx(P,{asChild:!0,children:o.jsxs("button",{onClick:()=>a(e.id),children:[o.jsx(zn,{className:"h-4 w-4 text-muted-foreground hover:text-primary"}),o.jsx("span",{children:e.title})]})}),o.jsxs(Ke,{children:[o.jsx(Be,{asChild:!0,children:o.jsxs(yn,{showOnHover:!0,children:[o.jsx(Z,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"More"})]})}),o.jsxs(Ve,{className:"w-48 rounded-lg",side:n?"bottom":"right",align:n?"end":"start",children:[e.isPublished&&o.jsxs(o.Fragment,{children:[o.jsx(be,{to:"/post/"+e.id,children:o.jsxs(ie,{children:[o.jsx(Ar,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{children:"View post"})]})}),o.jsx(gt,{})]}),o.jsxs(ie,{onClick:()=>s.mutate(e.id),children:[o.jsx(Rn,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{children:"Delete Note"})]})]})]})]})}function sa({value:e,setValue:n}){const t=rr(),r=de(),s=()=>{t.mutate(),r("/note")};return o.jsxs(X,{children:[o.jsx(R,{children:o.jsxs(P,{disabled:t.isPending,tooltip:"Create new",onClick:s,children:[t.isPending?o.jsx(sr,{className:"h-4 w-4 animate-spin"}):o.jsx(Kr,{className:"h-4 w-4"}),o.jsx("span",{children:"Create Note"})]})}),o.jsx(R,{children:o.jsx(or,{Component:Gt,classname:"bg-transparent dark:bg-transparent border-none ",value:e,setValue:n,placeholder:"Search notes..."})})]})}function aa(){const[e,n]=i.useState(1),{data:t,isLoading:r,error:s}=Oo(e),a=t?.notes??[],c=t?Math.ceil(t.total/t.limit):1,[u,d]=i.useState(""),[m,h]=i.useState(1),{data:l,isLoading:g,error:j}=Zo(u,m),v=l?.notes??[],S=l?Math.ceil(l.total/l.limit)-1:1;return o.jsxs(Ee,{className:"group-data-[collapsible=icon]:hidden",children:[o.jsx(L,{}),o.jsx(sa,{value:u,setValue:d}),o.jsx(Nn,{}),o.jsx(L,{children:"Notes"}),o.jsx(X,{className:"max-h-[calc(100vh-12rem)] overflow-y-none",children:r||g&&u!==""?o.jsx(R,{children:o.jsxs(P,{className:"text-muted-foreground",children:[o.jsx(Z,{className:"h-4 w-4"}),o.jsx("span",{children:"Loading..."})]})}):s||j&&u!==""?o.jsx(R,{children:o.jsxs(P,{className:"text-destructive",children:[o.jsx(Sn,{className:"h-4 w-4"}),o.jsx("span",{children:(s||j)?.message})]})}):u===""?a?.length?o.jsxs(o.Fragment,{children:[a.map(w=>o.jsx(xn,{note:w},w.id)),c>1&&o.jsxs("div",{className:"flex justify-center *:w-full",children:[o.jsx("button",{className:"place-items-center",disabled:e===1,onClick:()=>n(w=>w-1),children:o.jsx(sn,{color:e==1?"#71717b50":"#8e51ff",size:20})}),o.jsx(Z,{color:"#8e51ff",size:20}),o.jsx("button",{className:"place-items-center",disabled:e===c,onClick:()=>n(w=>w+1),children:o.jsx(tn,{color:e==c?"#71717b50":"#8e51ff",size:20})})]})]}):o.jsx("p",{className:"text-gray-500 self-center text-sm p-2",children:"No notes found"}):v?.length?o.jsxs(o.Fragment,{children:[v.map(w=>o.jsx(xn,{note:w},w.id)),S>1&&o.jsxs("div",{className:"flex justify-center *:w-full",children:[o.jsx("button",{className:"place-items-center",disabled:m===1,onClick:()=>h(w=>w-1),children:o.jsx(sn,{color:m==1?"#71717b50":"#8e51ff",size:20})}),o.jsx(Z,{color:"#8e51ff",size:20}),o.jsx("button",{className:"place-items-center",disabled:m===S,onClick:()=>h(w=>w+1),children:o.jsx(tn,{color:m==S?"#71717b50":"#8e51ff",size:20})})]})]}):o.jsx("p",{className:"text-gray-500 text-sm p-2",children:"No matches"})})]})}function ca({setNav:e,nav:n}){const t=n==="notes";return o.jsx("button",{onClick:()=>e("notes"),title:"Notes",className:`
        grid place-items-center size-8 rounded-2xl shadow-md transition
        hover:scale-105 hover:bg-zinc-200 dark:hover:bg-zinc-700
        ${t?"bg-zinc-100 dark:bg-zinc-800":""}
      `,children:o.jsx(Ur,{className:`h-5 w-5 ${t?"text-violet-500":"text-zinc-500 dark:text-zinc-800"}`})})}const ia="https://linaform-server.onrender.com",ua=()=>{const{clearAuth:e}=H();return Tt({mutationKey:["logout"],mutationFn:async()=>{if(!(await fetch(ia+"/api/auth/logout",{method:"POST",credentials:"include"})).ok)throw new Error("Logout failed")},onSuccess:()=>{e()},onError:n=>{console.error("Logout failed",n)}})};function la({user:e}){const{isMobile:n}=pe(),t=ua();return o.jsx(X,{children:o.jsx(R,{children:o.jsxs(Ke,{children:[o.jsx(Be,{asChild:!0,children:o.jsxs(P,{size:"lg",className:"data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground",children:[o.jsxs(Me,{className:"h-8 w-8 rounded-lg",children:[o.jsx(ke,{src:e.avatar,alt:e.name}),o.jsx(ye,{className:"rounded-lg",children:"CN"})]}),o.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[o.jsx("span",{className:"truncate font-medium",children:e.name}),o.jsx("span",{className:"truncate text-xs",children:e.email})]}),o.jsx(zr,{className:"ml-auto size-4"})]})}),o.jsxs(Ve,{className:"w-(--radix-dropdown-menu-trigger-width) min-w-56 rounded-lg",side:n?"bottom":"right",align:"end",sideOffset:4,children:[o.jsx(oa,{className:"p-0 font-normal",children:o.jsxs("div",{className:"flex items-center gap-2 px-1 py-1.5 text-left text-sm",children:[o.jsxs(Me,{className:"h-8 w-8 rounded-lg",children:[o.jsx(ke,{src:e.avatar,alt:e.name}),o.jsx(ye,{className:"rounded-lg",children:"CN"})]}),o.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[o.jsx("span",{className:"truncate font-medium",children:e.name}),o.jsx("span",{className:"truncate text-xs",children:e.email})]})]})}),o.jsx(gt,{}),o.jsxs(ie,{onClick:()=>t.mutate(),children:[o.jsx(Dr,{}),"Log out",t.isPending&&o.jsx(ar,{className:"inline mx-2 animate-spin",size:10})]})]})]})})})}function xt(){const{theme:e,setTheme:n}=cr();i.useEffect(()=>{const r=localStorage.getItem("theme");if(r)n(r),document.documentElement.classList.toggle("dark",r==="dark");else{const s=window.matchMedia("(prefers-color-scheme: dark)").matches;n(s?"dark":"light"),document.documentElement.classList.toggle("dark",s)}},[n]);const t=()=>{const r=e==="light"?"dark":"light";n(r),localStorage.setItem("theme",r),document.documentElement.classList.toggle("dark",r==="dark")};return o.jsx("button",{onClick:t,className:"place-items-center rounded-2xl size-8  shadow-md transition hover:scale-105 hover:bg-zinc-200 dark:hover:bg-zinc-700",title:"theme switcher",children:e==="light"?o.jsx(Lr,{className:"h-5 w-5 text-zinc-500 dark:text-zinc-800'"}):o.jsx(Vr,{className:"h-5 w-5 text-yellow-400"})})}const da=(e,n)=>{pr.init(e,n),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>mr(e,t)},flatten:{value:t=>hr(e,t)},addIssue:{value:t=>e.issues.push(t)},addIssues:{value:t=>e.issues.push(...t)},isEmpty:{get(){return e.issues.length===0}}})},xe=p("ZodError",da,{Parent:Error}),pa=fr(xe),ha=xr(xe),ma=gr(xe),fa=vr(xe),N=p("ZodType",(e,n)=>(k.init(e,n),e.def=n,Object.defineProperty(e,"_def",{value:n}),e.check=(...t)=>e.clone({...n,checks:[...n.checks??[],...t.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),e.clone=(t,r)=>_r(e,t,r),e.brand=()=>e,e.register=(t,r)=>(t.add(e,r),e),e.parse=(t,r)=>pa(e,t,r,{callee:e.parse}),e.safeParse=(t,r)=>ma(e,t,r),e.parseAsync=async(t,r)=>ha(e,t,r,{callee:e.parseAsync}),e.safeParseAsync=async(t,r)=>fa(e,t,r),e.spa=e.safeParseAsync,e.refine=(t,r)=>e.check(Ga(t,r)),e.superRefine=t=>e.check(Ka(t)),e.overwrite=t=>e.check(Q(t)),e.optional=()=>vn(e),e.nullable=()=>_n(e),e.nullish=()=>vn(_n(e)),e.nonoptional=t=>Ta(e,t),e.array=()=>ja(e),e.or=t=>Ma([e,t]),e.and=t=>ya(e,t),e.transform=t=>wn(e,Ca(t)),e.default=t=>Ra(e,t),e.prefault=t=>Ia(e,t),e.catch=t=>$a(e,t),e.pipe=t=>wn(e,t),e.readonly=()=>La(e),e.describe=t=>{const r=e.clone();return oe.add(r,{description:t}),r},Object.defineProperty(e,"description",{get(){return oe.get(e)?.description},configurable:!0}),e.meta=(...t)=>{if(t.length===0)return oe.get(e);const r=e.clone();return oe.add(r,t[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),ga=p("_ZodString",(e,n)=>{En.init(e,n),N.init(e,n);const t=e._zod.bag;e.format=t.format??null,e.minLength=t.minimum??null,e.maxLength=t.maximum??null,e.regex=(...r)=>e.check(No(...r)),e.includes=(...r)=>e.check(Po(...r)),e.startsWith=(...r)=>e.check(So(...r)),e.endsWith=(...r)=>e.check(Ro(...r)),e.min=(...r)=>e.check(se(...r)),e.max=(...r)=>e.check(An(...r)),e.length=(...r)=>e.check(Tn(...r)),e.nonempty=(...r)=>e.check(se(1,...r)),e.lowercase=r=>e.check(Co(r)),e.uppercase=r=>e.check(zo(r)),e.trim=()=>e.check(Io()),e.normalize=(...r)=>e.check(Eo(...r)),e.toLowerCase=()=>e.check(Ao()),e.toUpperCase=()=>e.check(To())}),xa=p("ZodStringFormat",(e,n)=>{In.init(e,n),ga.init(e,n)}),va=p("ZodUUID",(e,n)=>{io.init(e,n),xa.init(e,n)});function _a(e){return yo(va,e)}const wa=p("ZodArray",(e,n)=>{uo.init(e,n),N.init(e,n),e.element=n.element,e.min=(t,r)=>e.check(se(t,r)),e.nonempty=t=>e.check(se(1,t)),e.max=(t,r)=>e.check(An(t,r)),e.length=(t,r)=>e.check(Tn(t,r)),e.unwrap=()=>e.element});function ja(e,n){return Do(wa,e,n)}const ba=p("ZodUnion",(e,n)=>{lo.init(e,n),N.init(e,n),e.options=n.options});function Ma(e,n){return new ba({type:"union",options:e,...M(n)})}const ka=p("ZodIntersection",(e,n)=>{po.init(e,n),N.init(e,n)});function ya(e,n){return new ka({type:"intersection",left:e,right:n})}const Na=p("ZodTransform",(e,n)=>{ho.init(e,n),N.init(e,n),e._zod.parse=(t,r)=>{t.addIssue=a=>{if(typeof a=="string")t.issues.push(V(a,t.value,n));else{const c=a;c.fatal&&(c.continue=!1),c.code??(c.code="custom"),c.input??(c.input=t.value),c.inst??(c.inst=e),c.continue??(c.continue=!0),t.issues.push(V(c))}};const s=n.transform(t.value,t);return s instanceof Promise?s.then(a=>(t.value=a,t)):(t.value=s,t)}});function Ca(e){return new Na({type:"transform",transform:e})}const za=p("ZodOptional",(e,n)=>{mo.init(e,n),N.init(e,n),e.unwrap=()=>e._zod.def.innerType});function vn(e){return new za({type:"optional",innerType:e})}const Pa=p("ZodNullable",(e,n)=>{fo.init(e,n),N.init(e,n),e.unwrap=()=>e._zod.def.innerType});function _n(e){return new Pa({type:"nullable",innerType:e})}const Sa=p("ZodDefault",(e,n)=>{go.init(e,n),N.init(e,n),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Ra(e,n){return new Sa({type:"default",innerType:e,get defaultValue(){return typeof n=="function"?n():n}})}const Ea=p("ZodPrefault",(e,n)=>{xo.init(e,n),N.init(e,n),e.unwrap=()=>e._zod.def.innerType});function Ia(e,n){return new Ea({type:"prefault",innerType:e,get defaultValue(){return typeof n=="function"?n():n}})}const Aa=p("ZodNonOptional",(e,n)=>{vo.init(e,n),N.init(e,n),e.unwrap=()=>e._zod.def.innerType});function Ta(e,n){return new Aa({type:"nonoptional",innerType:e,...M(n)})}const Da=p("ZodCatch",(e,n)=>{_o.init(e,n),N.init(e,n),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function $a(e,n){return new Da({type:"catch",innerType:e,catchValue:typeof n=="function"?n:()=>n})}const Oa=p("ZodPipe",(e,n)=>{wo.init(e,n),N.init(e,n),e.in=n.in,e.out=n.out});function wn(e,n){return new Oa({type:"pipe",in:e,out:n})}const Za=p("ZodReadonly",(e,n)=>{jo.init(e,n),N.init(e,n)});function La(e){return new Za({type:"readonly",innerType:e})}const Fa=p("ZodCustom",(e,n)=>{bo.init(e,n),N.init(e,n)});function Ua(e,n){const t=new E({check:"custom",...M(n)});return t._zod.check=e,t}function Ga(e,n={}){return $o(Fa,e,n)}function Ka(e,n){const t=Ua(r=>(r.addIssue=s=>{if(typeof s=="string")r.issues.push(V(s,r.value,t._zod.def));else{const a=s;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=r.value),a.inst??(a.inst=t),a.continue??(a.continue=!t._zod.def.abort),r.issues.push(V(a))}},e(r.value,r)),n);return t}const We=Dt(e=>({notifications:[],addNotification:(n,t)=>e(r=>{const s={id:_a(),message:n,type:t,date:Date.now()};return{notifications:[...r.notifications,s]}}),removeNotification:n=>e(t=>({notifications:t.notifications.filter(r=>r.id!==n)})),clearNotifications:()=>e({notifications:[]})}));function Ba(){const{notifications:e,removeNotification:n,clearNotifications:t}=We();return o.jsxs(Ee,{className:"group-data-[collapsible=icon]:hidden",children:[o.jsx(L,{}),o.jsx(L,{className:"text-sidebar-foreground",children:e.length==0?o.jsx("span",{className:"text-gray-500",children:"No new notifications"}):o.jsxs("span",{className:"flex justify-between w-full",children:["Notifications",o.jsx("button",{onClick:t,children:o.jsx(br,{className:"text-sidebar-foreground size-4 "})})]})}),o.jsx(X,{children:e?.map(r=>o.jsx(R,{children:o.jsx(P,{asChild:!0,children:o.jsxs("div",{className:"flex items-center justify-between text-sidebar-foreground",children:[o.jsx(Pn,{className:"w-4 h-4"}),o.jsx("span",{className:"truncate",children:r.message}),o.jsx("button",{onClick:()=>n(r.id),className:"p-1",children:o.jsx(Or,{className:"w-4 h-4"})})]})})},r.date))})]})}function Va({setNav:e}){const{notifications:n}=We();return o.jsx("button",{onClick:()=>e("notifications"),className:"place-items-center rounded-2xl size-8  shadow-md transition hover:scale-105 hover:bg-zinc-200 dark:hover:bg-zinc-700",title:"Notifications",children:n.length>0?o.jsx(Pn,{className:"h-5 w-5 text-blue-400"}):o.jsx(kr,{className:"h-5 w-5 text-zinc-500 dark:text-zinc-800"})})}function Wa({author:e}){const{isMobile:n}=pe(),t=de();return o.jsxs(R,{children:[o.jsx(P,{asChild:!0,children:o.jsxs("button",{onClick:()=>t("/results/author?authorId="+e.id),children:[o.jsxs(Me,{className:"size-6 rounded-full",children:[o.jsx(ke,{src:"https://cdn.culture.ru/images/becb4d30-310b-5a5b-94be-56e086848ebf",alt:e.username}),o.jsx(ye,{className:"rounded-lg",children:"CN"})]}),o.jsx("span",{children:e.username})]})}),o.jsxs(Ke,{children:[o.jsx(Be,{asChild:!0,children:o.jsxs(yn,{showOnHover:!0,children:[o.jsx(Z,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"More"})]})}),o.jsx(Ve,{className:"w-48 rounded-lg",side:n?"bottom":"right",align:n?"end":"start",children:o.jsxs(ie,{children:[o.jsx(Rn,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{children:"Unsubscribe"})]})})]})]})}function qa(){const e=de(),{data:n,isLoading:t,error:r}=$t();return o.jsx(Ee,{className:"group-data-[collapsible=icon]:hidden",children:o.jsxs(X,{children:[o.jsx(L,{}),o.jsxs(P,{onClick:()=>e("/results/likes"),children:[o.jsx(zn,{className:"text-sidebar-foreground"}),o.jsx("span",{children:"Favorites"})]}),o.jsxs(P,{onClick:()=>e("/results/search"),children:[o.jsx(Rr,{className:"text-sidebar-foreground"}),o.jsx("span",{children:"Explore"})]}),o.jsx(Nn,{}),o.jsx(L,{children:"Your Fav Authors"}),t&&o.jsx(R,{children:o.jsxs(P,{className:"text-muted-foreground",children:[o.jsx(Z,{className:"h-4 w-4"}),o.jsx("span",{children:"Loading..."})]})}),r&&o.jsx(R,{children:o.jsxs(P,{className:"text-destructive",children:[o.jsx(Sn,{className:"h-4 w-4"}),o.jsx("span",{children:r.message})]})}),n&&n.length>0?n.map(s=>o.jsx(Wa,{author:s},s?.id)):o.jsx("p",{className:"text-gray-500 self-center text-sm p-2",children:"No authors found"})]})})}function Ha({setNav:e,nav:n}){return o.jsx("button",{onClick:()=>e("posts"),className:"place-items-center rounded-2xl size-8  shadow-md transition hover:scale-105 hover:bg-zinc-200 dark:hover:bg-zinc-700",title:"Posts",children:n==="posts"?o.jsx(on,{className:"h-5 w-5 text-emerald-600"}):o.jsx(on,{className:"h-5 w-5 text-zinc-500 dark:text-zinc-800"})})}function Ya({...e}){const{open:n}=pe(),t=Kt(),r=H(d=>d.user),s={name:r?.username??"",email:r?.email??"",avatar:"https://cdn.culture.ru/images/becb4d30-310b-5a5b-94be-56e086848ebf"},[a,c]=i.useState("notifications"),u=Ot();return i.useEffect(()=>{const d=u.pathname.split("/")[1];d=="note"?c("notes"):d=="post"||d=="results"?c("posts"):c("notifications")},[u]),o.jsxs(Bt,{collapsible:"icon",className:"shadow-lg shadow-zinc-900/20 dark:shadow-zinc-100/20 z-40",...e,children:[o.jsxs(Vt,{className:"flex gap-2",style:{flexDirection:t||n?"row":"column"},children:[o.jsx(xt,{}),o.jsx(ca,{setNav:c,nav:a}),o.jsx(Ha,{setNav:c,nav:a}),o.jsx(Va,{setNav:c})]}),o.jsx(Wt,{children:a==="notes"?o.jsx(aa,{}):a==="notifications"?o.jsx(Ba,{}):o.jsx(qa,{})}),o.jsx(qt,{children:o.jsx(la,{user:s})})]})}const Xa="https://linaform-server.onrender.com",Qa=()=>Re({queryKey:["refresh-token"],queryFn:async()=>await fetch(Xa+"/api/auth/refresh",{method:"POST",credentials:"include"}).then(async n=>{if(!n.ok)throw console.log("we got error here"),new Error((await n.json()).error??"Failed to refresh token");const t=await n.json();return wr.parse(t)}),refetchInterval:14*60*1e3,refetchOnWindowFocus:!1,refetchIntervalInBackground:!0,retry:!1,enabled:!0});function Ja(){return o.jsx("header",{className:"sticky top-0 z-50 flex justify-end items-center w-full h-16 bg-background px-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(xt,{}),o.jsx(be,{to:"/login",children:o.jsx(en,{variant:"default",children:"Sign In"})}),o.jsx(be,{to:"/register",children:o.jsx(en,{variant:"outline",children:"Register"})})]})})}function xc(){const{clearAuth:e,setToken:n,isAuthenticated:t}=H(),{data:r,status:s,error:a}=Qa(),{addNotification:c}=We();return i.useEffect(()=>{if(s=="error"){console.log(a),e();return}s=="success"&&n(r)},[s,r,n,e,a]),i.useEffect(()=>{c("Welcome to our app","success")},[]),t?o.jsxs(Ht,{children:[o.jsx(Ya,{}),o.jsx(Yt,{children:o.jsx(nn,{})})]}):o.jsxs(o.Fragment,{children:[o.jsx(Ja,{}),o.jsx(nn,{})]})}export{xc as default};
