import{V as b,j as e,W as z,X as N,Y as k,r as i,I as v}from"./index-Tjubhkso.js";import{P as f}from"./post-Q3HXqe4F.js";import{L as g}from"./loader-circle-BSKw3M_d.js";import{A as P,a as y,b as L}from"./avatar-C8HdNstl.js";import w from"./search-CnYCYkL2.js";import{s as A}from"./sidebar-BSceTEqa.js";import"./schemas-Dvu2-DyR.js";import"./index-pZb4YAyi.js";import"./search-input-CghMoVRI.js";import"./search-BOo54jWr.js";function C(){const{data:s,isLoading:c,hasNextPage:l,fetchNextPage:d,isFetchingNextPage:o}=b(),x=s?.pages.flatMap(t=>t.likes)??[];return c?e.jsx(g,{}):e.jsxs("div",{className:"flex flex-col gap-2 w-full px-20",children:[e.jsxs("h1",{className:"text-5xl my-10 text-nowrap flex items-baseline justify-center font-delius-swash-caps",children:["Your  ",e.jsx("img",{src:"/heart.png",alt:"liked",className:"size-15 translate-y-4"})," posts"]}),x.map(t=>e.jsx(f,{post:t.note},t.note.id)),x.length===0&&e.jsxs("p",{className:"self-center text-center translate-y-1/2 text-muted-foreground",children:["Oops, looks liked you haven't like any post. ",e.jsx("br",{}),e.jsx("a",{href:"/results/search",className:"hover:text-primary underline",children:" Try exploring"})]}),l&&e.jsx("button",{onClick:()=>d(),disabled:o,children:o?"Loading...":"Load more"})]})}function S(){const[s]=z(),c=s.get("authorId"),{data:l,isLoading:d,hasNextPage:o,fetchNextPage:x,isFetchingNextPage:t}=N(c),{data:h}=k(c),r=i.useMemo(()=>l?.pages.flatMap(a=>a.posts)??[],[l?.pages]),[n,p]=i.useState("recent"),[m,u]=i.useState(r??[]);return i.useEffect(()=>{u(r)},[r]),i.useEffect(()=>{n==="recent"?u(r):n==="popular"&&u([...r].sort((a,j)=>j.likes.length-a.likes.length))},[n,r]),d?e.jsx("div",{className:"flex justify-center py-20",children:e.jsx(g,{className:"animate-spin size-10 text-zinc-500"})}):e.jsxs("div",{className:"flex flex-col gap-8 w-full mx-auto px-20",children:[e.jsxs("header",{className:"flex items-center gap-6 w-full mt-10",children:[e.jsxs(P,{className:"size-20 rounded-full",children:[e.jsx(y,{src:"https://cdn.culture.ru/images/becb4d30-310b-5a5b-94be-56e086848ebf",alt:h?.username}),e.jsx(L,{className:"rounded-lg",children:"CN"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:h?.username}),e.jsxs("div",{className:"flex gap-6 text-zinc-500 text-sm",children:[e.jsxs("span",{children:[e.jsx("strong",{className:"text-zinc-900 dark:text-zinc-100",children:m.length})," Posts"]}),e.jsxs("span",{children:[e.jsx("strong",{className:"text-zinc-900 dark:text-zinc-100",children:h?.followers.length??0})," Subscribers"]})]})]})]}),e.jsxs("nav",{className:"flex justify-center gap-6 border-b border-zinc-200 dark:border-zinc-800 text-sm",children:[e.jsx("button",{onClick:()=>p("recent"),className:`pb-2 transition-colors ${n==="recent"?"border-b-2 border-zinc-900 dark:border-zinc-100 text-zinc-900 dark:text-zinc-100":"text-zinc-500 hover:text-zinc-900 dark:hover:text-zinc-100"}`,children:"Recent"}),e.jsx("button",{onClick:()=>p("popular"),className:`pb-2 transition-colors ${n==="popular"?"border-b-2 border-zinc-900 dark:border-zinc-100 text-zinc-900 dark:text-zinc-100":"text-zinc-500 hover:text-zinc-900 dark:hover:text-zinc-100"}`,children:"Popular"})]}),e.jsxs("section",{className:"flex flex-col gap-4",children:[m.map(a=>e.jsx(f,{post:a},a.id)),m.length===0&&e.jsxs("p",{className:"self-center text-center text-zinc-500 py-20",children:["Oops, looks like this author has no posts yet. ",e.jsx("br",{}),e.jsx("a",{href:"/results/search",className:"hover:text-zinc-900 dark:hover:text-zinc-100 underline",children:"Try exploring"})]}),o&&e.jsx("button",{onClick:()=>x(),disabled:t,className:"mx-auto mt-6 text-sm px-4 py-2 border rounded-md text-zinc-600 dark:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition",children:t?"Loading...":"Load more"})]})]})}function U(){const{type:s}=v();return e.jsxs("div",{className:"w-full h-full",children:[e.jsx(A,{}),s=="likes"?e.jsx(C,{}):s=="author"?e.jsx(S,{}):s=="search"&&e.jsx(w,{})]})}export{U as default};
