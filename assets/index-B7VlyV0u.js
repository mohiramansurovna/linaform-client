import{r as i,j as o,u as Q,L as Pt,a as Rt,q as Mn,R as Et,O as en}from"./index-DluB5dCl.js";import{u as pe,c as Nn,a as Cn,b as kn,R as It,A as At,P as he,d as Tt,e as g,h as Dt,f as $t,g as Ot,F as Zt,D as Lt,C as Ft,i as Ut,j as Kt,k as nn,l as K,S as R,m as S,n as zn,o as J,p as Gt,q as Ee,r as U,s as Sn,t as Bt,v as Vt,w as qt,x as Wt,y as Ht,z as Yt,B as Xt}from"./sidebar-Chdp4x4K.js";import{u as I}from"./useAuthStore-fUHCbePb.js";import{c as N,u as ee,b as Qt,d as Pn,a as me,B as tn}from"./createLucideIcon-0o6u6YEZ.js";import{P as G,d as Jt}from"./index-BEeqayWG.js";import{c as er,a as Rn,u as nr,I as tr,R as rr,b as or,d as sr,e as ar,S as L,A as cr}from"./index-LMDZ4JDy.js";import{H as En}from"./heart-C8gW1T3Z.js";import{S as ir}from"./search-input-8DZZICGP.js";import{L as ur}from"./loader-B2PTu4nb.js";import{C as rn}from"./chevrons-right-A25g8XOk.js";import{A as Me,a as Ne,b as Ce,u as lr,c as dr}from"./useSocialQuery-JsI-P8vQ.js";import{u as Ie}from"./useMutation-BezK9uMc.js";import{L as pr}from"./loader-circle-fnBM1XxQ.js";import{T as hr,A as mr}from"./auth-ribbon-CtF-WWEj.js";import{b as p,e as Ae,n as Te,g as De,d as _,c as ke,s as fr,f as xr,h as W,i as $e,j as ze,k as Se,l as on,r as gr,m as vr,o as H,q as b,$ as _r,t as wr,u as jr,_ as br,v as yr,w as Mr,x as Nr,y as Cr}from"./parse-CqfTvWUt.js";import{c as kr}from"./react-BTsYd7cd.js";import{B as In}from"./bell-ring-examz4Ts.js";import{A as zr}from"./schemas-DY3pto_e.js";import{D as Sr,a as Pr,b as Rr,c as Er,d as Ir,e as Ar}from"./dialog-CUU9GurP.js";import{u as Tr}from"./useUserStore-BA4mL2BW.js";import{m as Dr}from"./proxy-BtzyRkJ0.js";import"./useBaseQuery-HNIRHYnW.js";import"./search-C1jLN-wh.js";import"./index-Dp86KSMC.js";import"./useThemeStore-DjIK0vOl.js";const sn=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,$r=e=>{const n=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${n}$`)},Or=/^[^A-Z]*$/,Zr=/^[^a-z]*$/,E=p("$ZodCheck",(e,n)=>{var t;e._zod??(e._zod={}),e._zod.def=n,(t=e._zod).onattach??(t.onattach=[])}),Lr=p("$ZodCheckMaxLength",(e,n)=>{E.init(e,n),e._zod.when=t=>{const r=t.value;return!Te(r)&&r.length!==void 0},e._zod.onattach.push(t=>{const r=t._zod.bag.maximum??Number.POSITIVE_INFINITY;n.maximum<r&&(t._zod.bag.maximum=n.maximum)}),e._zod.check=t=>{const r=t.value;if(r.length<=n.maximum)return;const a=De(r);t.issues.push({origin:a,code:"too_big",maximum:n.maximum,inclusive:!0,input:r,inst:e,continue:!n.abort})}}),Fr=p("$ZodCheckMinLength",(e,n)=>{E.init(e,n),e._zod.when=t=>{const r=t.value;return!Te(r)&&r.length!==void 0},e._zod.onattach.push(t=>{const r=t._zod.bag.minimum??Number.NEGATIVE_INFINITY;n.minimum>r&&(t._zod.bag.minimum=n.minimum)}),e._zod.check=t=>{const r=t.value;if(r.length>=n.minimum)return;const a=De(r);t.issues.push({origin:a,code:"too_small",minimum:n.minimum,inclusive:!0,input:r,inst:e,continue:!n.abort})}}),Ur=p("$ZodCheckLengthEquals",(e,n)=>{E.init(e,n),e._zod.when=t=>{const r=t.value;return!Te(r)&&r.length!==void 0},e._zod.onattach.push(t=>{const r=t._zod.bag;r.minimum=n.length,r.maximum=n.length,r.length=n.length}),e._zod.check=t=>{const r=t.value,s=r.length;if(s===n.length)return;const a=De(r),c=s>n.length;t.issues.push({origin:a,...c?{code:"too_big",maximum:n.length}:{code:"too_small",minimum:n.length},input:t.value,inst:e,continue:!n.abort})}}),fe=p("$ZodCheckStringFormat",(e,n)=>{var t;E.init(e,n),e._zod.onattach.push(r=>{const s=r._zod.bag;s.format=n.format,n.pattern&&(s.patterns??(s.patterns=new Set),s.patterns.add(n.pattern))}),(t=e._zod).check??(t.check=r=>{if(!n.pattern)throw new Error("Not implemented.");n.pattern.lastIndex=0,!n.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:n.format,input:r.value,...n.pattern?{pattern:n.pattern.toString()}:{},inst:e,continue:!n.abort})})}),Kr=p("$ZodCheckRegex",(e,n)=>{fe.init(e,n),e._zod.check=t=>{n.pattern.lastIndex=0,!n.pattern.test(t.value)&&t.issues.push({origin:"string",code:"invalid_format",format:"regex",input:t.value,pattern:n.pattern.toString(),inst:e,continue:!n.abort})}}),Gr=p("$ZodCheckLowerCase",(e,n)=>{n.pattern??(n.pattern=Or),fe.init(e,n)}),Br=p("$ZodCheckUpperCase",(e,n)=>{n.pattern??(n.pattern=Zr),fe.init(e,n)}),Vr=p("$ZodCheckIncludes",(e,n)=>{E.init(e,n);const t=Ae(n.includes),r=new RegExp(typeof n.position=="number"?`^.{${n.position}}${t}`:t);n.pattern=r,e._zod.onattach.push(s=>{const a=s._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),e._zod.check=s=>{s.value.includes(n.includes,n.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:n.includes,input:s.value,inst:e,continue:!n.abort})}}),qr=p("$ZodCheckStartsWith",(e,n)=>{E.init(e,n);const t=new RegExp(`^${Ae(n.prefix)}.*`);n.pattern??(n.pattern=t),e._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(t)}),e._zod.check=r=>{r.value.startsWith(n.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:n.prefix,input:r.value,inst:e,continue:!n.abort})}}),Wr=p("$ZodCheckEndsWith",(e,n)=>{E.init(e,n);const t=new RegExp(`.*${Ae(n.suffix)}$`);n.pattern??(n.pattern=t),e._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(t)}),e._zod.check=r=>{r.value.endsWith(n.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:n.suffix,input:r.value,inst:e,continue:!n.abort})}}),Hr=p("$ZodCheckOverwrite",(e,n)=>{E.init(e,n),e._zod.check=t=>{t.value=n.tx(t.value)}}),Yr={major:4,minor:0,patch:0},y=p("$ZodType",(e,n)=>{var t;e??(e={}),_(e._zod,"id",()=>n.type+"_"+gr(10)),e._zod.def=n,e._zod.bag=e._zod.bag||{},e._zod.version=Yr;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const s of r)for(const a of s._zod.onattach)a(e);if(r.length===0)(t=e._zod).deferred??(t.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const s=(a,c,u)=>{let d=W(a),h;for(const m of c){if(m._zod.when){if(!m._zod.when(a))continue}else if(d)continue;const l=a.issues.length,x=m._zod.check(a);if(x instanceof Promise&&u?.async===!1)throw new ke;if(h||x instanceof Promise)h=(h??Promise.resolve()).then(async()=>{await x,a.issues.length!==l&&(d||(d=W(a,l)))});else{if(a.issues.length===l)continue;d||(d=W(a,l))}}return h?h.then(()=>a):a};e._zod.run=(a,c)=>{const u=e._zod.parse(a,c);if(u instanceof Promise){if(c.async===!1)throw new ke;return u.then(d=>s(d,r,c))}return s(u,r,c)}}e["~standard"]={validate:s=>{try{const a=fr(e,s);return a.success?{value:a.data}:{issues:a.error?.issues}}catch{return xr(e,s).then(c=>c.success?{value:c.data}:{issues:c.error?.issues})}},vendor:"zod",version:1}}),An=p("$ZodString",(e,n)=>{y.init(e,n),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??$r(e._zod.bag),e._zod.parse=(t,r)=>{if(n.coerce)try{t.value=String(t.value)}catch{}return typeof t.value=="string"||t.issues.push({expected:"string",code:"invalid_type",input:t.value,inst:e}),t}}),Tn=p("$ZodStringFormat",(e,n)=>{fe.init(e,n),An.init(e,n)}),Xr=p("$ZodUUID",(e,n)=>{if(n.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[n.version];if(r===void 0)throw new Error(`Invalid UUID version: "${n.version}"`);n.pattern??(n.pattern=sn(r))}else n.pattern??(n.pattern=sn());Tn.init(e,n)});function an(e,n,t){e.issues.length&&n.issues.push(...vr(t,e.issues)),n.value[t]=e.value}const Qr=p("$ZodArray",(e,n)=>{y.init(e,n),e._zod.parse=(t,r)=>{const s=t.value;if(!Array.isArray(s))return t.issues.push({expected:"array",code:"invalid_type",input:s,inst:e}),t;t.value=Array(s.length);const a=[];for(let c=0;c<s.length;c++){const u=s[c],d=n.element._zod.run({value:u,issues:[]},r);d instanceof Promise?a.push(d.then(h=>an(h,t,c))):an(d,t,c)}return a.length?Promise.all(a).then(()=>t):t}});function cn(e,n,t,r){for(const s of e)if(s.issues.length===0)return n.value=s.value,n;return n.issues.push({code:"invalid_union",input:n.value,inst:t,errors:e.map(s=>s.issues.map(a=>ze(a,r,Se())))}),n}const Jr=p("$ZodUnion",(e,n)=>{y.init(e,n),_(e._zod,"values",()=>{if(n.options.every(t=>t._zod.values))return new Set(n.options.flatMap(t=>Array.from(t._zod.values)))}),_(e._zod,"pattern",()=>{if(n.options.every(t=>t._zod.pattern)){const t=n.options.map(r=>r._zod.pattern);return new RegExp(`^(${t.map(r=>$e(r.source)).join("|")})$`)}}),e._zod.parse=(t,r)=>{let s=!1;const a=[];for(const c of n.options){const u=c._zod.run({value:t.value,issues:[]},r);if(u instanceof Promise)a.push(u),s=!0;else{if(u.issues.length===0)return u;a.push(u)}}return s?Promise.all(a).then(c=>cn(c,t,e,r)):cn(a,t,e,r)}}),eo=p("$ZodIntersection",(e,n)=>{y.init(e,n),e._zod.parse=(t,r)=>{const{value:s}=t,a=n.left._zod.run({value:s,issues:[]},r),c=n.right._zod.run({value:s,issues:[]},r);return a instanceof Promise||c instanceof Promise?Promise.all([a,c]).then(([d,h])=>un(t,d,h)):un(t,a,c)}});function Pe(e,n){if(e===n)return{valid:!0,data:e};if(e instanceof Date&&n instanceof Date&&+e==+n)return{valid:!0,data:e};if(on(e)&&on(n)){const t=Object.keys(n),r=Object.keys(e).filter(a=>t.indexOf(a)!==-1),s={...e,...n};for(const a of r){const c=Pe(e[a],n[a]);if(!c.valid)return{valid:!1,mergeErrorPath:[a,...c.mergeErrorPath]};s[a]=c.data}return{valid:!0,data:s}}if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return{valid:!1,mergeErrorPath:[]};const t=[];for(let r=0;r<e.length;r++){const s=e[r],a=n[r],c=Pe(s,a);if(!c.valid)return{valid:!1,mergeErrorPath:[r,...c.mergeErrorPath]};t.push(c.data)}return{valid:!0,data:t}}return{valid:!1,mergeErrorPath:[]}}function un(e,n,t){if(n.issues.length&&e.issues.push(...n.issues),t.issues.length&&e.issues.push(...t.issues),W(e))return e;const r=Pe(n.value,t.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}const no=p("$ZodTransform",(e,n)=>{y.init(e,n),e._zod.parse=(t,r)=>{const s=n.transform(t.value,t);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(c=>(t.value=c,t));if(s instanceof Promise)throw new ke;return t.value=s,t}}),to=p("$ZodOptional",(e,n)=>{y.init(e,n),e._zod.optin="optional",e._zod.optout="optional",_(e._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,void 0]):void 0),_(e._zod,"pattern",()=>{const t=n.innerType._zod.pattern;return t?new RegExp(`^(${$e(t.source)})?$`):void 0}),e._zod.parse=(t,r)=>t.value===void 0?t:n.innerType._zod.run(t,r)}),ro=p("$ZodNullable",(e,n)=>{y.init(e,n),_(e._zod,"optin",()=>n.innerType._zod.optin),_(e._zod,"optout",()=>n.innerType._zod.optout),_(e._zod,"pattern",()=>{const t=n.innerType._zod.pattern;return t?new RegExp(`^(${$e(t.source)}|null)$`):void 0}),_(e._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,null]):void 0),e._zod.parse=(t,r)=>t.value===null?t:n.innerType._zod.run(t,r)}),oo=p("$ZodDefault",(e,n)=>{y.init(e,n),e._zod.optin="optional",_(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(t,r)=>{if(t.value===void 0)return t.value=n.defaultValue,t;const s=n.innerType._zod.run(t,r);return s instanceof Promise?s.then(a=>ln(a,n)):ln(s,n)}});function ln(e,n){return e.value===void 0&&(e.value=n.defaultValue),e}const so=p("$ZodPrefault",(e,n)=>{y.init(e,n),e._zod.optin="optional",_(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(t,r)=>(t.value===void 0&&(t.value=n.defaultValue),n.innerType._zod.run(t,r))}),ao=p("$ZodNonOptional",(e,n)=>{y.init(e,n),_(e._zod,"values",()=>{const t=n.innerType._zod.values;return t?new Set([...t].filter(r=>r!==void 0)):void 0}),e._zod.parse=(t,r)=>{const s=n.innerType._zod.run(t,r);return s instanceof Promise?s.then(a=>dn(a,e)):dn(s,e)}});function dn(e,n){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:n}),e}const co=p("$ZodCatch",(e,n)=>{y.init(e,n),_(e._zod,"optin",()=>n.innerType._zod.optin),_(e._zod,"optout",()=>n.innerType._zod.optout),_(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(t,r)=>{const s=n.innerType._zod.run(t,r);return s instanceof Promise?s.then(a=>(t.value=a.value,a.issues.length&&(t.value=n.catchValue({...t,error:{issues:a.issues.map(c=>ze(c,r,Se()))},input:t.value}),t.issues=[]),t)):(t.value=s.value,s.issues.length&&(t.value=n.catchValue({...t,error:{issues:s.issues.map(a=>ze(a,r,Se()))},input:t.value}),t.issues=[]),t)}}),io=p("$ZodPipe",(e,n)=>{y.init(e,n),_(e._zod,"values",()=>n.in._zod.values),_(e._zod,"optin",()=>n.in._zod.optin),_(e._zod,"optout",()=>n.out._zod.optout),e._zod.parse=(t,r)=>{const s=n.in._zod.run(t,r);return s instanceof Promise?s.then(a=>pn(a,n,r)):pn(s,n,r)}});function pn(e,n,t){return W(e)?e:n.out._zod.run({value:e.value,issues:e.issues},t)}const uo=p("$ZodReadonly",(e,n)=>{y.init(e,n),_(e._zod,"propValues",()=>n.innerType._zod.propValues),_(e._zod,"optin",()=>n.innerType._zod.optin),_(e._zod,"optout",()=>n.innerType._zod.optout),e._zod.parse=(t,r)=>{const s=n.innerType._zod.run(t,r);return s instanceof Promise?s.then(hn):hn(s)}});function hn(e){return e.value=Object.freeze(e.value),e}const lo=p("$ZodCustom",(e,n)=>{E.init(e,n),y.init(e,n),e._zod.parse=(t,r)=>t,e._zod.check=t=>{const r=t.value,s=n.fn(r);if(s instanceof Promise)return s.then(a=>mn(a,t,r,e));mn(s,t,r,e)}});function mn(e,n,t,r){if(!e){const s={code:"custom",input:t,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(s.params=r._zod.def.params),n.issues.push(H(s))}}class po{constructor(){this._map=new WeakMap,this._idmap=new Map}add(n,...t){const r=t[0];if(this._map.set(n,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,n)}return this}remove(n){return this._map.delete(n),this}get(n){const t=n._zod.parent;if(t){const r={...this.get(t)??{}};return delete r.id,{...r,...this._map.get(n)}}return this._map.get(n)}has(n){return this._map.has(n)}}function ho(){return new po}const ce=ho();function mo(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...b(n)})}function Dn(e,n){return new Lr({check:"max_length",...b(n),maximum:e})}function ie(e,n){return new Fr({check:"min_length",...b(n),minimum:e})}function $n(e,n){return new Ur({check:"length_equals",...b(n),length:e})}function fo(e,n){return new Kr({check:"string_format",format:"regex",...b(n),pattern:e})}function xo(e){return new Gr({check:"string_format",format:"lowercase",...b(e)})}function go(e){return new Br({check:"string_format",format:"uppercase",...b(e)})}function vo(e,n){return new Vr({check:"string_format",format:"includes",...b(n),includes:e})}function _o(e,n){return new qr({check:"string_format",format:"starts_with",...b(n),prefix:e})}function wo(e,n){return new Wr({check:"string_format",format:"ends_with",...b(n),suffix:e})}function ne(e){return new Hr({check:"overwrite",tx:e})}function jo(e){return ne(n=>n.normalize(e))}function bo(){return ne(e=>e.trim())}function yo(){return ne(e=>e.toLowerCase())}function Mo(){return ne(e=>e.toUpperCase())}function No(e,n,t){return new e({type:"array",element:n,...b(t)})}function Co(e,n,t){return new e({type:"custom",check:"custom",fn:n,...b(t)})}/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M15 8h6",key:"8ybuxh"}],["path",{d:"M16.243 3.757A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673A9.4 9.4 0 0 1 18.667 12",key:"bdwj86"}]],zo=N("bell-minus",ko);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Po=N("bell",So);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M16 12h2",key:"7q9ll5"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M6 8h2",key:"30oboj"}]],fn=N("book-open-text",Ro);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]],xn=N("chevrons-left",Eo);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],Ao=N("chevrons-up-down",Io);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],On=N("circle-alert",To);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$o=N("compass",Do);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],F=N("ellipsis",Oo);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=[["path",{d:"m15 17 5-5-5-5",key:"nf172w"}],["path",{d:"M4 18v-2a4 4 0 0 1 4-4h12",key:"jmiej9"}]],Lo=N("forward",Zo);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Uo=N("log-out",Fo);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=[["path",{d:"M5 12h14",key:"1ays0h"}]],Go=N("minus",Ko);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Vo=N("pen",Bo);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Wo=N("square-pen",qo);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Zn=N("trash-2",Ho),Ln="https://linaform-server.onrender.com",Yo=(e,n=7)=>{const{accessToken:t}=I();return pe({queryKey:["notes",e],queryFn:async()=>{const r=await fetch(Ln+`/api/note?page=${e}&limit=${n}`,{headers:{Authorization:`Bearer ${t}`}});if(!r.ok)throw new Error("Failed to fetch notes");return r.json()}})},Xo=(e,n,t=7)=>{const{accessToken:r}=I();return pe({queryKey:["notesSearch",e,n],queryFn:async()=>await fetch(Ln+`/api/note/search?term=${e}&page=${n}&limit=${t}`,{headers:{Authorization:`Bearer ${r}`}}).then(async s=>{if(s.status===404)return[];if(!s.ok)throw new Error((await s.json()).error);return s.json()}),enabled:!!e})};var Re=["Enter"," "],Qo=["ArrowDown","PageUp","Home"],Fn=["ArrowUp","PageDown","End"],Jo=[...Qo,...Fn],es={ltr:[...Re,"ArrowRight"],rtl:[...Re,"ArrowLeft"]},ns={ltr:["ArrowLeft"],rtl:["ArrowRight"]},te="Menu",[Y,ts,rs]=er(te),[T,Un]=Nn(te,[rs,Cn,Rn]),xe=Cn(),Kn=Rn(),[os,D]=T(te),[ss,re]=T(te),Gn=e=>{const{__scopeMenu:n,open:t=!1,children:r,dir:s,onOpenChange:a,modal:c=!0}=e,u=xe(n),[d,h]=i.useState(null),m=i.useRef(!1),l=kn(a),x=nr(s);return i.useEffect(()=>{const j=()=>{m.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>m.current=!1;return document.addEventListener("keydown",j,{capture:!0}),()=>{document.removeEventListener("keydown",j,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),o.jsx(It,{...u,children:o.jsx(os,{scope:n,open:t,onOpenChange:l,content:d,onContentChange:h,children:o.jsx(ss,{scope:n,onClose:i.useCallback(()=>l(!1),[l]),isUsingKeyboardRef:m,dir:x,modal:c,children:r})})})};Gn.displayName=te;var as="MenuAnchor",Oe=i.forwardRef((e,n)=>{const{__scopeMenu:t,...r}=e,s=xe(t);return o.jsx(At,{...s,...r,ref:n})});Oe.displayName=as;var Ze="MenuPortal",[cs,Bn]=T(Ze,{forceMount:void 0}),Vn=e=>{const{__scopeMenu:n,forceMount:t,children:r,container:s}=e,a=D(Ze,n);return o.jsx(cs,{scope:n,forceMount:t,children:o.jsx(he,{present:t||a.open,children:o.jsx(Tt,{asChild:!0,container:s,children:r})})})};Vn.displayName=Ze;var z="MenuContent",[is,Le]=T(z),qn=i.forwardRef((e,n)=>{const t=Bn(z,e.__scopeMenu),{forceMount:r=t.forceMount,...s}=e,a=D(z,e.__scopeMenu),c=re(z,e.__scopeMenu);return o.jsx(Y.Provider,{scope:e.__scopeMenu,children:o.jsx(he,{present:r||a.open,children:o.jsx(Y.Slot,{scope:e.__scopeMenu,children:c.modal?o.jsx(us,{...s,ref:n}):o.jsx(ls,{...s,ref:n})})})})}),us=i.forwardRef((e,n)=>{const t=D(z,e.__scopeMenu),r=i.useRef(null),s=ee(n,r);return i.useEffect(()=>{const a=r.current;if(a)return Dt(a)},[]),o.jsx(Fe,{...e,ref:s,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:g(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),ls=i.forwardRef((e,n)=>{const t=D(z,e.__scopeMenu);return o.jsx(Fe,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),ds=Qt("MenuContent.ScrollLock"),Fe=i.forwardRef((e,n)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:c,disableOutsidePointerEvents:u,onEntryFocus:d,onEscapeKeyDown:h,onPointerDownOutside:m,onFocusOutside:l,onInteractOutside:x,onDismiss:j,disableOutsideScroll:v,...P}=e,w=D(z,t),$=re(z,t),bt=xe(t),yt=Kn(t),He=ts(t),[Mt,Ye]=i.useState(null),oe=i.useRef(null),Nt=ee(n,oe,w.onContentChange),se=i.useRef(0),ae=i.useRef(""),Ct=i.useRef(0),we=i.useRef(null),Xe=i.useRef("right"),je=i.useRef(0),kt=v?Ot:i.Fragment,zt=v?{as:ds,allowPinchZoom:!0}:void 0,St=f=>{const Z=ae.current+f,A=He().filter(k=>!k.disabled),B=document.activeElement,be=A.find(k=>k.ref.current===B)?.textValue,ye=A.map(k=>k.textValue),Qe=ys(ye,Z,be),V=A.find(k=>k.textValue===Qe)?.ref.current;(function k(Je){ae.current=Je,window.clearTimeout(se.current),Je!==""&&(se.current=window.setTimeout(()=>k(""),1e3))})(Z),V&&setTimeout(()=>V.focus())};i.useEffect(()=>()=>window.clearTimeout(se.current),[]),$t();const O=i.useCallback(f=>Xe.current===we.current?.side&&Ns(f,we.current?.area),[]);return o.jsx(is,{scope:t,searchRef:ae,onItemEnter:i.useCallback(f=>{O(f)&&f.preventDefault()},[O]),onItemLeave:i.useCallback(f=>{O(f)||(oe.current?.focus(),Ye(null))},[O]),onTriggerLeave:i.useCallback(f=>{O(f)&&f.preventDefault()},[O]),pointerGraceTimerRef:Ct,onPointerGraceIntentChange:i.useCallback(f=>{we.current=f},[]),children:o.jsx(kt,{...zt,children:o.jsx(Zt,{asChild:!0,trapped:s,onMountAutoFocus:g(a,f=>{f.preventDefault(),oe.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:c,children:o.jsx(Lt,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:h,onPointerDownOutside:m,onFocusOutside:l,onInteractOutside:x,onDismiss:j,children:o.jsx(rr,{asChild:!0,...yt,dir:$.dir,orientation:"vertical",loop:r,currentTabStopId:Mt,onCurrentTabStopIdChange:Ye,onEntryFocus:g(d,f=>{$.isUsingKeyboardRef.current||f.preventDefault()}),preventScrollOnEntryFocus:!0,children:o.jsx(Ft,{role:"menu","aria-orientation":"vertical","data-state":ut(w.open),"data-radix-menu-content":"",dir:$.dir,...bt,...P,ref:Nt,style:{outline:"none",...P.style},onKeyDown:g(P.onKeyDown,f=>{const A=f.target.closest("[data-radix-menu-content]")===f.currentTarget,B=f.ctrlKey||f.altKey||f.metaKey,be=f.key.length===1;A&&(f.key==="Tab"&&f.preventDefault(),!B&&be&&St(f.key));const ye=oe.current;if(f.target!==ye||!Jo.includes(f.key))return;f.preventDefault();const V=He().filter(k=>!k.disabled).map(k=>k.ref.current);Fn.includes(f.key)&&V.reverse(),js(V)}),onBlur:g(e.onBlur,f=>{f.currentTarget.contains(f.target)||(window.clearTimeout(se.current),ae.current="")}),onPointerMove:g(e.onPointerMove,X(f=>{const Z=f.target,A=je.current!==f.clientX;if(f.currentTarget.contains(Z)&&A){const B=f.clientX>je.current?"right":"left";Xe.current=B,je.current=f.clientX}}))})})})})})})});qn.displayName=z;var ps="MenuGroup",Ue=i.forwardRef((e,n)=>{const{__scopeMenu:t,...r}=e;return o.jsx(G.div,{role:"group",...r,ref:n})});Ue.displayName=ps;var hs="MenuLabel",Wn=i.forwardRef((e,n)=>{const{__scopeMenu:t,...r}=e;return o.jsx(G.div,{...r,ref:n})});Wn.displayName=hs;var ue="MenuItem",gn="menu.itemSelect",ge=i.forwardRef((e,n)=>{const{disabled:t=!1,onSelect:r,...s}=e,a=i.useRef(null),c=re(ue,e.__scopeMenu),u=Le(ue,e.__scopeMenu),d=ee(n,a),h=i.useRef(!1),m=()=>{const l=a.current;if(!t&&l){const x=new CustomEvent(gn,{bubbles:!0,cancelable:!0});l.addEventListener(gn,j=>r?.(j),{once:!0}),Jt(l,x),x.defaultPrevented?h.current=!1:c.onClose()}};return o.jsx(Hn,{...s,ref:d,disabled:t,onClick:g(e.onClick,m),onPointerDown:l=>{e.onPointerDown?.(l),h.current=!0},onPointerUp:g(e.onPointerUp,l=>{h.current||l.currentTarget?.click()}),onKeyDown:g(e.onKeyDown,l=>{const x=u.searchRef.current!=="";t||x&&l.key===" "||Re.includes(l.key)&&(l.currentTarget.click(),l.preventDefault())})})});ge.displayName=ue;var Hn=i.forwardRef((e,n)=>{const{__scopeMenu:t,disabled:r=!1,textValue:s,...a}=e,c=Le(ue,t),u=Kn(t),d=i.useRef(null),h=ee(n,d),[m,l]=i.useState(!1),[x,j]=i.useState("");return i.useEffect(()=>{const v=d.current;v&&j((v.textContent??"").trim())},[a.children]),o.jsx(Y.ItemSlot,{scope:t,disabled:r,textValue:s??x,children:o.jsx(tr,{asChild:!0,...u,focusable:!r,children:o.jsx(G.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:h,onPointerMove:g(e.onPointerMove,X(v=>{r?c.onItemLeave(v):(c.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:g(e.onPointerLeave,X(v=>c.onItemLeave(v))),onFocus:g(e.onFocus,()=>l(!0)),onBlur:g(e.onBlur,()=>l(!1))})})})}),ms="MenuCheckboxItem",Yn=i.forwardRef((e,n)=>{const{checked:t=!1,onCheckedChange:r,...s}=e;return o.jsx(nt,{scope:e.__scopeMenu,checked:t,children:o.jsx(ge,{role:"menuitemcheckbox","aria-checked":le(t)?"mixed":t,...s,ref:n,"data-state":Ge(t),onSelect:g(s.onSelect,()=>r?.(le(t)?!0:!t),{checkForDefaultPrevented:!1})})})});Yn.displayName=ms;var Xn="MenuRadioGroup",[fs,xs]=T(Xn,{value:void 0,onValueChange:()=>{}}),Qn=i.forwardRef((e,n)=>{const{value:t,onValueChange:r,...s}=e,a=kn(r);return o.jsx(fs,{scope:e.__scopeMenu,value:t,onValueChange:a,children:o.jsx(Ue,{...s,ref:n})})});Qn.displayName=Xn;var Jn="MenuRadioItem",et=i.forwardRef((e,n)=>{const{value:t,...r}=e,s=xs(Jn,e.__scopeMenu),a=t===s.value;return o.jsx(nt,{scope:e.__scopeMenu,checked:a,children:o.jsx(ge,{role:"menuitemradio","aria-checked":a,...r,ref:n,"data-state":Ge(a),onSelect:g(r.onSelect,()=>s.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});et.displayName=Jn;var Ke="MenuItemIndicator",[nt,gs]=T(Ke,{checked:!1}),tt=i.forwardRef((e,n)=>{const{__scopeMenu:t,forceMount:r,...s}=e,a=gs(Ke,t);return o.jsx(he,{present:r||le(a.checked)||a.checked===!0,children:o.jsx(G.span,{...s,ref:n,"data-state":Ge(a.checked)})})});tt.displayName=Ke;var vs="MenuSeparator",rt=i.forwardRef((e,n)=>{const{__scopeMenu:t,...r}=e;return o.jsx(G.div,{role:"separator","aria-orientation":"horizontal",...r,ref:n})});rt.displayName=vs;var _s="MenuArrow",ot=i.forwardRef((e,n)=>{const{__scopeMenu:t,...r}=e,s=xe(t);return o.jsx(Ut,{...s,...r,ref:n})});ot.displayName=_s;var ws="MenuSub",[Fc,st]=T(ws),q="MenuSubTrigger",at=i.forwardRef((e,n)=>{const t=D(q,e.__scopeMenu),r=re(q,e.__scopeMenu),s=st(q,e.__scopeMenu),a=Le(q,e.__scopeMenu),c=i.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:d}=a,h={__scopeMenu:e.__scopeMenu},m=i.useCallback(()=>{c.current&&window.clearTimeout(c.current),c.current=null},[]);return i.useEffect(()=>m,[m]),i.useEffect(()=>{const l=u.current;return()=>{window.clearTimeout(l),d(null)}},[u,d]),o.jsx(Oe,{asChild:!0,...h,children:o.jsx(Hn,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":s.contentId,"data-state":ut(t.open),...e,ref:Pn(n,s.onTriggerChange),onClick:l=>{e.onClick?.(l),!(e.disabled||l.defaultPrevented)&&(l.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:g(e.onPointerMove,X(l=>{a.onItemEnter(l),!l.defaultPrevented&&!e.disabled&&!t.open&&!c.current&&(a.onPointerGraceIntentChange(null),c.current=window.setTimeout(()=>{t.onOpenChange(!0),m()},100))})),onPointerLeave:g(e.onPointerLeave,X(l=>{m();const x=t.content?.getBoundingClientRect();if(x){const j=t.content?.dataset.side,v=j==="right",P=v?-5:5,w=x[v?"left":"right"],$=x[v?"right":"left"];a.onPointerGraceIntentChange({area:[{x:l.clientX+P,y:l.clientY},{x:w,y:x.top},{x:$,y:x.top},{x:$,y:x.bottom},{x:w,y:x.bottom}],side:j}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(l),l.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:g(e.onKeyDown,l=>{const x=a.searchRef.current!=="";e.disabled||x&&l.key===" "||es[r.dir].includes(l.key)&&(t.onOpenChange(!0),t.content?.focus(),l.preventDefault())})})})});at.displayName=q;var ct="MenuSubContent",it=i.forwardRef((e,n)=>{const t=Bn(z,e.__scopeMenu),{forceMount:r=t.forceMount,...s}=e,a=D(z,e.__scopeMenu),c=re(z,e.__scopeMenu),u=st(ct,e.__scopeMenu),d=i.useRef(null),h=ee(n,d);return o.jsx(Y.Provider,{scope:e.__scopeMenu,children:o.jsx(he,{present:r||a.open,children:o.jsx(Y.Slot,{scope:e.__scopeMenu,children:o.jsx(Fe,{id:u.contentId,"aria-labelledby":u.triggerId,...s,ref:h,align:"start",side:c.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{c.isUsingKeyboardRef.current&&d.current?.focus(),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:g(e.onFocusOutside,m=>{m.target!==u.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:g(e.onEscapeKeyDown,m=>{c.onClose(),m.preventDefault()}),onKeyDown:g(e.onKeyDown,m=>{const l=m.currentTarget.contains(m.target),x=ns[c.dir].includes(m.key);l&&x&&(a.onOpenChange(!1),u.trigger?.focus(),m.preventDefault())})})})})})});it.displayName=ct;function ut(e){return e?"open":"closed"}function le(e){return e==="indeterminate"}function Ge(e){return le(e)?"indeterminate":e?"checked":"unchecked"}function js(e){const n=document.activeElement;for(const t of e)if(t===n||(t.focus(),document.activeElement!==n))return}function bs(e,n){return e.map((t,r)=>e[(n+r)%e.length])}function ys(e,n,t){const s=n.length>1&&Array.from(n).every(h=>h===n[0])?n[0]:n,a=t?e.indexOf(t):-1;let c=bs(e,Math.max(a,0));s.length===1&&(c=c.filter(h=>h!==t));const d=c.find(h=>h.toLowerCase().startsWith(s.toLowerCase()));return d!==t?d:void 0}function Ms(e,n){const{x:t,y:r}=e;let s=!1;for(let a=0,c=n.length-1;a<n.length;c=a++){const u=n[a],d=n[c],h=u.x,m=u.y,l=d.x,x=d.y;m>r!=x>r&&t<(l-h)*(r-m)/(x-m)+h&&(s=!s)}return s}function Ns(e,n){if(!n)return!1;const t={x:e.clientX,y:e.clientY};return Ms(t,n)}function X(e){return n=>n.pointerType==="mouse"?e(n):void 0}var Cs=Gn,ks=Oe,zs=Vn,Ss=qn,Ps=Ue,Rs=Wn,Es=ge,Is=Yn,As=Qn,Ts=et,Ds=tt,$s=rt,Os=ot,Zs=at,Ls=it,ve="DropdownMenu",[Fs,Uc]=Nn(ve,[Un]),M=Un(),[Us,lt]=Fs(ve),dt=e=>{const{__scopeDropdownMenu:n,children:t,dir:r,open:s,defaultOpen:a,onOpenChange:c,modal:u=!0}=e,d=M(n),h=i.useRef(null),[m,l]=Kt({prop:s,defaultProp:a??!1,onChange:c,caller:ve});return o.jsx(Us,{scope:n,triggerId:nn(),triggerRef:h,contentId:nn(),open:m,onOpenChange:l,onOpenToggle:i.useCallback(()=>l(x=>!x),[l]),modal:u,children:o.jsx(Cs,{...d,open:m,onOpenChange:l,dir:r,modal:u,children:t})})};dt.displayName=ve;var pt="DropdownMenuTrigger",ht=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...s}=e,a=lt(pt,t),c=M(t);return o.jsx(ks,{asChild:!0,...c,children:o.jsx(G.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Pn(n,a.triggerRef),onPointerDown:g(e.onPointerDown,u=>{!r&&u.button===0&&u.ctrlKey===!1&&(a.onOpenToggle(),a.open||u.preventDefault())}),onKeyDown:g(e.onKeyDown,u=>{r||(["Enter"," "].includes(u.key)&&a.onOpenToggle(),u.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})})})});ht.displayName=pt;var Ks="DropdownMenuPortal",mt=e=>{const{__scopeDropdownMenu:n,...t}=e,r=M(n);return o.jsx(zs,{...r,...t})};mt.displayName=Ks;var ft="DropdownMenuContent",xt=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=lt(ft,t),a=M(t),c=i.useRef(!1);return o.jsx(Ss,{id:s.contentId,"aria-labelledby":s.triggerId,...a,...r,ref:n,onCloseAutoFocus:g(e.onCloseAutoFocus,u=>{c.current||s.triggerRef.current?.focus(),c.current=!1,u.preventDefault()}),onInteractOutside:g(e.onInteractOutside,u=>{const d=u.detail.originalEvent,h=d.button===0&&d.ctrlKey===!0,m=d.button===2||h;(!s.modal||m)&&(c.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});xt.displayName=ft;var Gs="DropdownMenuGroup",Bs=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=M(t);return o.jsx(Ps,{...s,...r,ref:n})});Bs.displayName=Gs;var Vs="DropdownMenuLabel",gt=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=M(t);return o.jsx(Rs,{...s,...r,ref:n})});gt.displayName=Vs;var qs="DropdownMenuItem",vt=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=M(t);return o.jsx(Es,{...s,...r,ref:n})});vt.displayName=qs;var Ws="DropdownMenuCheckboxItem",Hs=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=M(t);return o.jsx(Is,{...s,...r,ref:n})});Hs.displayName=Ws;var Ys="DropdownMenuRadioGroup",Xs=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=M(t);return o.jsx(As,{...s,...r,ref:n})});Xs.displayName=Ys;var Qs="DropdownMenuRadioItem",Js=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=M(t);return o.jsx(Ts,{...s,...r,ref:n})});Js.displayName=Qs;var ea="DropdownMenuItemIndicator",na=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=M(t);return o.jsx(Ds,{...s,...r,ref:n})});na.displayName=ea;var ta="DropdownMenuSeparator",_t=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=M(t);return o.jsx($s,{...s,...r,ref:n})});_t.displayName=ta;var ra="DropdownMenuArrow",oa=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=M(t);return o.jsx(Os,{...s,...r,ref:n})});oa.displayName=ra;var sa="DropdownMenuSubTrigger",aa=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=M(t);return o.jsx(Zs,{...s,...r,ref:n})});aa.displayName=sa;var ca="DropdownMenuSubContent",ia=i.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,s=M(t);return o.jsx(Ls,{...s,...r,ref:n,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ia.displayName=ca;var ua=dt,la=ht,da=mt,pa=xt,ha=gt,ma=vt,fa=_t;function Be({...e}){return o.jsx(ua,{"data-slot":"dropdown-menu",...e})}function Ve({...e}){return o.jsx(la,{"data-slot":"dropdown-menu-trigger",...e})}function qe({className:e,sideOffset:n=4,...t}){return o.jsx(da,{children:o.jsx(pa,{"data-slot":"dropdown-menu-content",sideOffset:n,className:me("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...t})})}function de({className:e,inset:n,variant:t="default",...r}){return o.jsx(ma,{"data-slot":"dropdown-menu-item","data-inset":n,"data-variant":t,className:me("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function xa({className:e,inset:n,...t}){return o.jsx(ha,{"data-slot":"dropdown-menu-label","data-inset":n,className:me("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",e),...t})}function wt({className:e,...n}){return o.jsx(fa,{"data-slot":"dropdown-menu-separator",className:me("bg-border -mx-1 my-1 h-px",e),...n})}function vn({note:e}){const{isMobile:n}=K(),{setSelectedNoteId:t}=or(),r=Q(),s=sr(),a=c=>{t(c),r("/note")};return o.jsxs(R,{children:[o.jsx(S,{asChild:!0,children:o.jsxs("button",{onClick:()=>a(e.id),children:[o.jsx(En,{className:"h-4 w-4 text-muted-foreground hover:text-primary"}),o.jsx("span",{children:e.title})]})}),o.jsxs(Be,{children:[o.jsx(Ve,{asChild:!0,children:o.jsxs(zn,{showOnHover:!0,children:[o.jsx(F,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"More"})]})}),o.jsxs(qe,{className:"w-48 rounded-lg",side:n?"bottom":"right",align:n?"end":"start",children:[e.isPublished&&o.jsxs(o.Fragment,{children:[o.jsx(Pt,{to:"/post/"+e.id,children:o.jsxs(de,{children:[o.jsx(Lo,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{children:"View post"})]})}),o.jsx(wt,{})]}),o.jsxs(de,{onClick:()=>s.mutate(e.id),children:[o.jsx(Zn,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{children:"Delete Note"})]})]})]})]})}function ga({value:e,setValue:n}){const t=ar(),r=Q(),s=()=>{t.mutate(),r("/note")};return o.jsxs(J,{children:[o.jsx(R,{children:o.jsxs(S,{disabled:t.isPending,tooltip:"Create new",onClick:s,children:[t.isPending?o.jsx(ur,{className:"h-4 w-4 animate-spin"}):o.jsx(Wo,{className:"h-4 w-4"}),o.jsx("span",{children:"Create Note"})]})}),o.jsx(R,{children:o.jsx(ir,{Component:Gt,classname:"bg-transparent dark:bg-transparent border-none ",value:e,setValue:n,placeholder:"Search notes..."})})]})}function va(){const[e,n]=i.useState(1),{data:t,isLoading:r,error:s}=Yo(e),a=t?.notes??[],c=t?Math.ceil(t.total/t.limit):1,[u,d]=i.useState(""),[h,m]=i.useState(1),{data:l,isLoading:x,error:j}=Xo(u,h),v=l?.notes??[],P=l?Math.ceil(l.total/l.limit)-1:1;return o.jsxs(Ee,{className:"group-data-[collapsible=icon]:hidden",children:[o.jsx(U,{}),o.jsx(ga,{value:u,setValue:d}),o.jsx(Sn,{}),o.jsx(U,{children:"Notes"}),o.jsx(J,{className:"max-h-[calc(100vh-12rem)] overflow-y-none",children:r||x&&u!==""?o.jsx(R,{children:o.jsxs(S,{className:"text-muted-foreground",children:[o.jsx(F,{className:"h-4 w-4"}),o.jsx("span",{children:"Loading..."})]})}):s||j&&u!==""?o.jsx(R,{children:o.jsxs(S,{className:"text-destructive",children:[o.jsx(On,{className:"h-4 w-4"}),o.jsx("span",{children:(s||j)?.message})]})}):u===""?a?.length?o.jsxs(o.Fragment,{children:[a.map(w=>o.jsx(vn,{note:w},w.id)),c>1&&o.jsxs("div",{className:"flex justify-center *:w-full",children:[o.jsx("button",{className:"place-items-center",disabled:e===1,onClick:()=>n(w=>w-1),children:o.jsx(xn,{color:e==1?"#71717b50":"#8e51ff",size:20})}),o.jsx(F,{color:"#8e51ff",size:20}),o.jsx("button",{className:"place-items-center",disabled:e===c,onClick:()=>n(w=>w+1),children:o.jsx(rn,{color:e==c?"#71717b50":"#8e51ff",size:20})})]})]}):o.jsx("p",{className:"text-gray-500 self-center text-sm p-2",children:"No notes found"}):v?.length?o.jsxs(o.Fragment,{children:[v.map(w=>o.jsx(vn,{note:w},w.id)),P>1&&o.jsxs("div",{className:"flex justify-center *:w-full",children:[o.jsx("button",{className:"place-items-center",disabled:h===1,onClick:()=>m(w=>w-1),children:o.jsx(xn,{color:h==1?"#71717b50":"#8e51ff",size:20})}),o.jsx(F,{color:"#8e51ff",size:20}),o.jsx("button",{className:"place-items-center",disabled:h===P,onClick:()=>m(w=>w+1),children:o.jsx(rn,{color:h==P?"#71717b50":"#8e51ff",size:20})})]})]}):o.jsx("p",{className:"text-gray-500 text-sm p-2",children:"No matches"})})]})}function _a({setNav:e,nav:n}){const t=n==="notes",{setOpen:r}=K();return o.jsx("button",{onClick:()=>{e("notes"),r(!0)},title:"Notes",className:`
        grid place-items-center size-8 rounded-2xl shadow-md transition
        hover:scale-105 hover:bg-zinc-200 dark:hover:bg-zinc-700
        ${t?"bg-zinc-100 dark:bg-zinc-800":""}
      `,children:o.jsx(Vo,{className:`h-5 w-5 ${t?"text-violet-500":"text-zinc-500 dark:text-zinc-800"}`})})}const wa="https://linaform-server.onrender.com",ja=()=>{const{clearAuth:e}=I();return Ie({mutationKey:["logout"],mutationFn:async()=>{if(!(await fetch(wa+"/api/auth/logout",{method:"POST",credentials:"include"})).ok)throw new Error("Logout failed")},onSuccess:()=>{e()},onError:n=>{console.error("Logout failed",n)}})};function ba({user:e}){const{isMobile:n}=K(),t=ja();return o.jsx(J,{children:o.jsx(R,{children:o.jsxs(Be,{children:[o.jsx(Ve,{asChild:!0,children:o.jsxs(S,{size:"lg",className:"data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground",children:[o.jsxs(Me,{className:"h-8 w-8 rounded-lg",children:[o.jsx(Ne,{src:e.avatar,alt:e.name}),o.jsx(Ce,{className:"rounded-lg",children:"CN"})]}),o.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[o.jsx("span",{className:"truncate font-medium",children:e.name}),o.jsx("span",{className:"truncate text-xs",children:e.email})]}),o.jsx(Ao,{className:"ml-auto size-4"})]})}),o.jsxs(qe,{className:"w-(--radix-dropdown-menu-trigger-width) min-w-56 rounded-lg",side:n?"bottom":"right",align:"end",sideOffset:4,children:[o.jsx(xa,{className:"p-0 font-normal",children:o.jsxs("div",{className:"flex items-center gap-2 px-1 py-1.5 text-left text-sm",children:[o.jsxs(Me,{className:"h-8 w-8 rounded-lg",children:[o.jsx(Ne,{src:e.avatar,alt:e.name}),o.jsx(Ce,{className:"rounded-lg",children:"CN"})]}),o.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[o.jsx("span",{className:"truncate font-medium",children:e.name}),o.jsx("span",{className:"truncate text-xs",children:e.email})]})]})}),o.jsx(wt,{}),o.jsxs(de,{onClick:()=>t.mutate(),children:[o.jsx(Uo,{}),"Log out",t.isPending&&o.jsx(pr,{className:"inline mx-2 animate-spin",size:10})]})]})]})})})}const ya=(e,n)=>{_r.init(e,n),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>jr(e,t)},flatten:{value:t=>wr(e,t)},addIssue:{value:t=>e.issues.push(t)},addIssues:{value:t=>e.issues.push(...t)},isEmpty:{get(){return e.issues.length===0}}})},_e=p("ZodError",ya,{Parent:Error}),Ma=br(_e),Na=Mr(_e),Ca=yr(_e),ka=Nr(_e),C=p("ZodType",(e,n)=>(y.init(e,n),e.def=n,Object.defineProperty(e,"_def",{value:n}),e.check=(...t)=>e.clone({...n,checks:[...n.checks??[],...t.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),e.clone=(t,r)=>Cr(e,t,r),e.brand=()=>e,e.register=(t,r)=>(t.add(e,r),e),e.parse=(t,r)=>Ma(e,t,r,{callee:e.parse}),e.safeParse=(t,r)=>Ca(e,t,r),e.parseAsync=async(t,r)=>Na(e,t,r,{callee:e.parseAsync}),e.safeParseAsync=async(t,r)=>ka(e,t,r),e.spa=e.safeParseAsync,e.refine=(t,r)=>e.check(nc(t,r)),e.superRefine=t=>e.check(tc(t)),e.overwrite=t=>e.check(ne(t)),e.optional=()=>_n(e),e.nullable=()=>wn(e),e.nullish=()=>_n(wn(e)),e.nonoptional=t=>qa(e,t),e.array=()=>Ia(e),e.or=t=>Ta([e,t]),e.and=t=>$a(e,t),e.transform=t=>jn(e,Za(t)),e.default=t=>Ka(e,t),e.prefault=t=>Ba(e,t),e.catch=t=>Ha(e,t),e.pipe=t=>jn(e,t),e.readonly=()=>Qa(e),e.describe=t=>{const r=e.clone();return ce.add(r,{description:t}),r},Object.defineProperty(e,"description",{get(){return ce.get(e)?.description},configurable:!0}),e.meta=(...t)=>{if(t.length===0)return ce.get(e);const r=e.clone();return ce.add(r,t[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),za=p("_ZodString",(e,n)=>{An.init(e,n),C.init(e,n);const t=e._zod.bag;e.format=t.format??null,e.minLength=t.minimum??null,e.maxLength=t.maximum??null,e.regex=(...r)=>e.check(fo(...r)),e.includes=(...r)=>e.check(vo(...r)),e.startsWith=(...r)=>e.check(_o(...r)),e.endsWith=(...r)=>e.check(wo(...r)),e.min=(...r)=>e.check(ie(...r)),e.max=(...r)=>e.check(Dn(...r)),e.length=(...r)=>e.check($n(...r)),e.nonempty=(...r)=>e.check(ie(1,...r)),e.lowercase=r=>e.check(xo(r)),e.uppercase=r=>e.check(go(r)),e.trim=()=>e.check(bo()),e.normalize=(...r)=>e.check(jo(...r)),e.toLowerCase=()=>e.check(yo()),e.toUpperCase=()=>e.check(Mo())}),Sa=p("ZodStringFormat",(e,n)=>{Tn.init(e,n),za.init(e,n)}),Pa=p("ZodUUID",(e,n)=>{Xr.init(e,n),Sa.init(e,n)});function Ra(e){return mo(Pa,e)}const Ea=p("ZodArray",(e,n)=>{Qr.init(e,n),C.init(e,n),e.element=n.element,e.min=(t,r)=>e.check(ie(t,r)),e.nonempty=t=>e.check(ie(1,t)),e.max=(t,r)=>e.check(Dn(t,r)),e.length=(t,r)=>e.check($n(t,r)),e.unwrap=()=>e.element});function Ia(e,n){return No(Ea,e,n)}const Aa=p("ZodUnion",(e,n)=>{Jr.init(e,n),C.init(e,n),e.options=n.options});function Ta(e,n){return new Aa({type:"union",options:e,...b(n)})}const Da=p("ZodIntersection",(e,n)=>{eo.init(e,n),C.init(e,n)});function $a(e,n){return new Da({type:"intersection",left:e,right:n})}const Oa=p("ZodTransform",(e,n)=>{no.init(e,n),C.init(e,n),e._zod.parse=(t,r)=>{t.addIssue=a=>{if(typeof a=="string")t.issues.push(H(a,t.value,n));else{const c=a;c.fatal&&(c.continue=!1),c.code??(c.code="custom"),c.input??(c.input=t.value),c.inst??(c.inst=e),c.continue??(c.continue=!0),t.issues.push(H(c))}};const s=n.transform(t.value,t);return s instanceof Promise?s.then(a=>(t.value=a,t)):(t.value=s,t)}});function Za(e){return new Oa({type:"transform",transform:e})}const La=p("ZodOptional",(e,n)=>{to.init(e,n),C.init(e,n),e.unwrap=()=>e._zod.def.innerType});function _n(e){return new La({type:"optional",innerType:e})}const Fa=p("ZodNullable",(e,n)=>{ro.init(e,n),C.init(e,n),e.unwrap=()=>e._zod.def.innerType});function wn(e){return new Fa({type:"nullable",innerType:e})}const Ua=p("ZodDefault",(e,n)=>{oo.init(e,n),C.init(e,n),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Ka(e,n){return new Ua({type:"default",innerType:e,get defaultValue(){return typeof n=="function"?n():n}})}const Ga=p("ZodPrefault",(e,n)=>{so.init(e,n),C.init(e,n),e.unwrap=()=>e._zod.def.innerType});function Ba(e,n){return new Ga({type:"prefault",innerType:e,get defaultValue(){return typeof n=="function"?n():n}})}const Va=p("ZodNonOptional",(e,n)=>{ao.init(e,n),C.init(e,n),e.unwrap=()=>e._zod.def.innerType});function qa(e,n){return new Va({type:"nonoptional",innerType:e,...b(n)})}const Wa=p("ZodCatch",(e,n)=>{co.init(e,n),C.init(e,n),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function Ha(e,n){return new Wa({type:"catch",innerType:e,catchValue:typeof n=="function"?n:()=>n})}const Ya=p("ZodPipe",(e,n)=>{io.init(e,n),C.init(e,n),e.in=n.in,e.out=n.out});function jn(e,n){return new Ya({type:"pipe",in:e,out:n})}const Xa=p("ZodReadonly",(e,n)=>{uo.init(e,n),C.init(e,n)});function Qa(e){return new Xa({type:"readonly",innerType:e})}const Ja=p("ZodCustom",(e,n)=>{lo.init(e,n),C.init(e,n)});function ec(e,n){const t=new E({check:"custom",...b(n)});return t._zod.check=e,t}function nc(e,n={}){return Co(Ja,e,n)}function tc(e,n){const t=ec(r=>(r.addIssue=s=>{if(typeof s=="string")r.issues.push(H(s,r.value,t._zod.def));else{const a=s;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=r.value),a.inst??(a.inst=t),a.continue??(a.continue=!t._zod.def.abort),r.issues.push(H(a))}},e(r.value,r)),n);return t}const We=kr(e=>({notifications:[],addNotification:(n,t)=>e(r=>{const s={id:Ra(),message:n,type:t,date:Date.now()};return{notifications:[...r.notifications,s]}}),removeNotification:n=>e(t=>({notifications:t.notifications.filter(r=>r.id!==n)})),clearNotifications:()=>e({notifications:[]})}));function rc(){const{notifications:e,removeNotification:n,clearNotifications:t}=We();return o.jsxs(Ee,{className:"group-data-[collapsible=icon]:hidden",children:[o.jsx(U,{}),o.jsx(U,{className:"text-sidebar-foreground",children:e.length==0?o.jsx("span",{className:"text-gray-500",children:"No new notifications"}):o.jsxs("span",{className:"flex justify-between w-full",children:["Notifications",o.jsx("button",{onClick:t,children:o.jsx(zo,{className:"text-sidebar-foreground size-4 "})})]})}),o.jsx(J,{children:e?.map(r=>o.jsx(R,{children:o.jsx(S,{asChild:!0,children:o.jsxs("div",{className:"flex items-center justify-between text-sidebar-foreground",children:[o.jsx(In,{className:"w-4 h-4"}),o.jsx("span",{className:"truncate",children:r.message}),o.jsx("button",{onClick:()=>n(r.id),className:"p-1",children:o.jsx(Go,{className:"w-4 h-4"})})]})})},r.date))})]})}function oc({setNav:e}){const{notifications:n}=We();return o.jsx("button",{onClick:()=>e("notifications"),className:"place-items-center rounded-2xl size-8  shadow-md transition hover:scale-105 hover:bg-zinc-200 dark:hover:bg-zinc-700",title:"Notifications",children:n.length>0?o.jsx(In,{className:"h-5 w-5 text-blue-400"}):o.jsx(Po,{className:"h-5 w-5 text-zinc-500 dark:text-zinc-800"})})}function sc({author:e}){const{isMobile:n}=K(),t=Q();return o.jsxs(R,{children:[o.jsx(S,{asChild:!0,children:o.jsxs("button",{onClick:()=>t("/results/author?authorId="+e.id),children:[o.jsxs(Me,{className:"size-6 rounded-full",children:[o.jsx(Ne,{src:"https://cdn.culture.ru/images/becb4d30-310b-5a5b-94be-56e086848ebf",alt:e.username}),o.jsx(Ce,{className:"rounded-lg",children:"CN"})]}),o.jsx("span",{children:e.username})]})}),o.jsxs(Be,{children:[o.jsx(Ve,{asChild:!0,children:o.jsxs(zn,{showOnHover:!0,children:[o.jsx(F,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"More"})]})}),o.jsx(qe,{className:"w-48 rounded-lg",side:n?"bottom":"right",align:n?"end":"start",children:o.jsxs(de,{children:[o.jsx(Zn,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{children:"Unsubscribe"})]})})]})]})}function ac(){const e=Q(),{data:n,isLoading:t,error:r}=lr();return o.jsx(Ee,{className:"group-data-[collapsible=icon]:hidden",children:o.jsxs(J,{children:[o.jsx(U,{}),o.jsxs(S,{onClick:()=>e("/results/likes"),children:[o.jsx(En,{className:"text-sidebar-foreground"}),o.jsx("span",{children:"Favorites"})]}),o.jsxs(S,{onClick:()=>e("/results/search"),children:[o.jsx($o,{className:"text-sidebar-foreground"}),o.jsx("span",{children:"Explore"})]}),o.jsx(Sn,{}),o.jsx(U,{children:"Your Fav Authors"}),t&&o.jsx(R,{children:o.jsxs(S,{className:"text-muted-foreground",children:[o.jsx(F,{className:"h-4 w-4"}),o.jsx("span",{children:"Loading..."})]})}),r&&o.jsx(R,{children:o.jsxs(S,{className:"text-destructive",children:[o.jsx(On,{className:"h-4 w-4"}),o.jsx("span",{children:r.message})]})}),n&&n.length>0?n.map(s=>o.jsx(sc,{author:s},s?.id)):o.jsx("p",{className:"text-gray-500 self-center text-sm p-2",children:"No authors found"})]})})}function cc({setNav:e,nav:n}){const{setOpen:t}=K();return o.jsx("button",{onClick:()=>{e("posts"),t(!0)},className:"place-items-center rounded-2xl size-8  shadow-md transition hover:scale-105 hover:bg-zinc-200 dark:hover:bg-zinc-700",title:"Posts",children:n==="posts"?o.jsx(fn,{className:"h-5 w-5 text-emerald-600"}):o.jsx(fn,{className:"h-5 w-5 text-zinc-500 dark:text-zinc-800"})})}function ic({...e}){const{open:n}=K(),t=Bt(),r=I(d=>d.user),s={name:r?.username??"",email:r?.email??"",avatar:"https://cdn.culture.ru/images/becb4d30-310b-5a5b-94be-56e086848ebf"},[a,c]=i.useState("notifications"),u=Rt();return i.useEffect(()=>{const d=u.pathname.split("/")[1];d=="note"?c("notes"):d=="post"||d=="results"?c("posts"):c("notifications")},[u]),o.jsxs(Vt,{collapsible:"icon",className:"shadow-lg shadow-zinc-900/20 dark:shadow-zinc-100/20 z-40",...e,children:[o.jsxs(qt,{className:"flex gap-2",style:{flexDirection:t||n?"row":"column"},children:[o.jsx(hr,{}),o.jsx(_a,{setNav:c,nav:a}),o.jsx(cc,{setNav:c,nav:a}),o.jsx(oc,{setNav:c})]}),o.jsx(Wt,{children:a==="notes"?o.jsx(va,{}):a==="notifications"?o.jsx(rc,{}):o.jsx(ac,{})}),o.jsx(Ht,{children:o.jsx(ba,{user:s})})]})}const uc="https://linaform-server.onrender.com",lc=()=>pe({queryKey:["refresh-token"],queryFn:async()=>await fetch(uc+"/api/auth/refresh",{method:"POST",credentials:"include"}).then(async n=>{if(!n.ok)throw console.log("we got error here"),new Error((await n.json()).error??"Failed to refresh token");const t=await n.json();return zr.parse(t)}),refetchInterval:14*60*1e3,refetchOnWindowFocus:!1,refetchIntervalInBackground:!0,retry:!1,enabled:!0}),jt="https://linaform-server.onrender.com",dc=()=>{const{accessToken:e}=I();return Ie({mutationKey:["follow"],mutationFn:async n=>await(await fetch(jt+`/api/social/follow/${n}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}})).json(),onSuccess:()=>{Mn.invalidateQueries({queryKey:["user"]})},onError:n=>{console.error("failed to follow",n)}})},pc=()=>{const{accessToken:e}=I();return Ie({mutationKey:["unfollow"],mutationFn:async n=>await(await fetch(jt+`/api/social/unfollow/${n}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}})).json(),onSuccess:()=>{Mn.invalidateQueries({queryKey:["user"]})}})};function hc(){const{selectedUserId:e,setSelectedUserId:n}=Tr(),{data:t,isFetching:r}=dr(e||null),{user:s}=I(),a=dc(),c=pc(),u=t?.followers.some(h=>h.id===s?.id)??!1,d=Q();return o.jsx(Sr,{open:!!e,onOpenChange:()=>n(null),children:o.jsxs(Pr,{className:"overflow-y-scroll scrollbar-custom max-h-screen",children:[o.jsxs(Rr,{className:"flex flex-col items-center gap-4",children:[r?o.jsx(L,{className:"w-20 h-20 rounded-full"}):o.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center text-xl font-semibold",children:t?.username?.charAt(0).toUpperCase()}),o.jsx(Er,{className:"text-lg font-semibold",children:r?o.jsx(L,{className:"h-6 w-40 rounded-md"}):t?.username}),o.jsxs("div",{className:"flex gap-10 mt-2 text-sm text-gray-600",children:[o.jsx("div",{className:"flex flex-col items-center",children:r?o.jsxs(o.Fragment,{children:[o.jsx(L,{className:"h-4 w-8 mb-1 rounded-sm"}),o.jsx(L,{className:"h-3 w-16 rounded-sm"})]}):o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"font-bold",children:t?.followers?.length||0}),o.jsx("span",{children:"Followers"})]})}),o.jsx("div",{className:"flex flex-col items-center",children:r?o.jsxs(o.Fragment,{children:[o.jsx(L,{className:"h-4 w-8 mb-1 rounded-sm"}),o.jsx(L,{className:"h-3 w-16 rounded-sm"})]}):o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"font-bold",children:t?.following?.length||0}),o.jsx("span",{children:"Following"})]})})]})]}),o.jsx(Ir,{children:o.jsxs("button",{onClick:()=>d("/results/author?authorId="+e),children:["Go to ",t?.username,"'s posts"]})}),s&&o.jsxs(Ar,{className:"flex justify-end gap-3",children:[o.jsx(tn,{variant:"secondary",onClick:()=>n(null),children:"Cancel"}),s.id!=e&&o.jsx(tn,{disabled:u?c.isPending:a.isPending,onClick:()=>{e&&(u?c.mutate(e):a.mutate(e))},children:u?"Unfollow":"Follow"})]})]})})}const bn=Et.memo(hc),mc="https://linaform-server.onrender.com",fc=()=>pe({queryKey:["checkServer"],queryFn:async()=>(await fetch(mc+"/api/")).ok,retryDelay:5e3,retry:e=>e<14});function yn(){const{status:e}=fc(),[n,t]=i.useState(!0);return i.useEffect(()=>{if(e&&t(!0),e=="success"){const r=setTimeout(()=>{t(!1)},5e3);return()=>clearTimeout(r)}},[e]),o.jsx(cr,{children:n&&o.jsx(Dr.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0,backgroundColor:e=="success"?"#22c55e":e=="error"?"#ef4444":"#facc15",color:"#fff"},exit:{opacity:0,y:-10},transition:{duration:.4},className:"w-full text-center text-sm font-semibold h-5 fixed z-70 top-0 left-0",children:e=="success"?o.jsx("p",{children:" Yay. Server is running"}):e=="pending"?o.jsx("p",{children:"Checking server. It may take around 50 seconds to wake up the server."}):e=="error"&&o.jsx("p",{children:"There is an error with server"})},"success-banner")})}function Kc(){const{clearAuth:e,setToken:n,isAuthenticated:t}=I(),{data:r,status:s,error:a}=lc(),{addNotification:c}=We();return i.useEffect(()=>{if(s=="error"){console.log(a),e();return}s=="success"&&n(r)},[s,r,n,e,a]),i.useEffect(()=>{c("Welcome to our app","success")},[]),t?o.jsxs(Yt,{children:[o.jsx(ic,{}),o.jsx(Xt,{children:o.jsx(en,{})}),o.jsx(bn,{}),o.jsx(yn,{})]}):o.jsxs(o.Fragment,{children:[o.jsx(yn,{}),o.jsx(mr,{}),o.jsx(bn,{}),o.jsx(en,{})]})}export{Kc as default};
